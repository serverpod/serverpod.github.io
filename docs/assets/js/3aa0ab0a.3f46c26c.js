"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[42800],{34624:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"concepts/exceptions","title":"Error handling and exceptions","description":"Handling errors well is essential when you are building your server. To simplify things, Serverpod allows you to throw an exception on the server, serialize it, and catch it in your client app.","source":"@site/versioned_docs/version-1.1.0/04-concepts/04-exceptions.md","sourceDirName":"04-concepts","slug":"/concepts/exceptions","permalink":"/1.1.0/concepts/exceptions","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/versioned_docs/version-1.1.0/04-concepts/04-exceptions.md","tags":[],"version":"1.1.0","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Sessions","permalink":"/1.1.0/concepts/sessions"},"next":{"title":"Database communication","permalink":"/1.1.0/concepts/database-communication"}}');var o=t(74848),r=t(28453);const s={},a="Error handling and exceptions",c={},l=[{value:"Serializable exceptions",id:"serializable-exceptions",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"error-handling-and-exceptions",children:"Error handling and exceptions"})}),"\n",(0,o.jsx)(n.p,{children:"Handling errors well is essential when you are building your server. To simplify things, Serverpod allows you to throw an exception on the server, serialize it, and catch it in your client app."}),"\n",(0,o.jsx)(n.p,{children:"If you throw a normal exception that isn't caught by your code, it will be treated as an internal server error. The exception will be logged together with its stack trace, and a 500 HTTP status (internal server error) will be sent to the client. On the client side, this will throw a non-specific ServerpodException, which provides no more data than a session id number which can help identify the call in your logs."}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"Use the Serverpod Insights app to view your logs. It will show any failed or slow calls and will make it easy to pinpoint any errors in your server."})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Uncaught exceptions thrown in endpoints are logged in the ",(0,o.jsx)(n.code,{children:"serverpod_session_log"})," table, not in the ",(0,o.jsx)(n.code,{children:"serverpod_log"})," table. To understand more about the differences between these two tables, you can read more about ",(0,o.jsx)(n.a,{href:"logging",children:"logging"})," in Serverpod."]})}),"\n",(0,o.jsx)(n.h2,{id:"serializable-exceptions",children:"Serializable exceptions"}),"\n",(0,o.jsxs)(n.p,{children:["Serverpod allows adding data to an exception you throw on the server and extracting that data in the client. This is useful for passing error messages back to the client when a call fails. You use the same YAML-files to define the serializable exceptions as you would with any serializable entity (see ",(0,o.jsx)(n.a,{href:"serialization",children:"serialization"})," for details). The only difference is that you use the keyword ",(0,o.jsx)(n.code,{children:"exception"})," instead of ",(0,o.jsx)(n.code,{children:"class"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"exception: MyException\nfields:\n  message: String\n  errorType: MyEnum\n"})}),"\n",(0,o.jsxs)(n.p,{children:["After you run ",(0,o.jsx)(n.code,{children:"serverpod generate"}),", you can throw that exception when processing a call to the server."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-dart",children:"class ExampleEndpoint extends Endpoint {\n  Future<void> doThingy(Session session) {\n    // ... do stuff ...\n    if (failure) {\n      throw MyException(\n        message: 'Failed to do thingy',\n        errorType: MyEnum.thingyError,\n      );\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"In your app, catch the exception as you would catch any exception."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-dart",children:"try {\n  client.example.doThingy();\n}\non (MyException) catch(e) {\n  print(e.message);\n}\ncatch(e) {\n  print('Something else went wrong.');\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);