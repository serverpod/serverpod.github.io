"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[17289],{13451:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"concepts/database/sort","title":"Sort","description":"It is often desirable to order the results of a database query. The \'find\' method has an orderBy parameter where you can specify a column for sorting. The parameter takes a callback as an argument that passes a model-specific table descriptor, also accessible through the t field on the model. The table descriptor represents the database table associated with the model and includes fields for each corresponding column. The callback is then used to specify the column to sort by.","source":"@site/versioned_docs/version-1.2.0/05-concepts/06-database/08-sort.md","sourceDirName":"05-concepts/06-database","slug":"/concepts/database/sort","permalink":"/1.2.0/concepts/database/sort","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/versioned_docs/version-1.2.0/05-concepts/06-database/08-sort.md","tags":[],"version":"1.2.0","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Relation queries","permalink":"/1.2.0/concepts/database/relation-queries"},"next":{"title":"Transactions","permalink":"/1.2.0/concepts/database/transactions"}}');var r=t(74848),a=t(28453);const o={},d="Sort",c={},i=[{value:"Sort on relations",id:"sort-on-relations",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sort",children:"Sort"})}),"\n",(0,r.jsxs)(n.p,{children:["It is often desirable to order the results of a database query. The 'find' method has an ",(0,r.jsx)(n.code,{children:"orderBy"})," parameter where you can specify a column for sorting. The parameter takes a callback as an argument that passes a model-specific table descriptor, also accessible through the ",(0,r.jsx)(n.code,{children:"t"})," field on the model. The table descriptor represents the database table associated with the model and includes fields for each corresponding column. The callback is then used to specify the column to sort by."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderBy: (t) => t.name,\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example we fetch all companies and sort them by their name."}),"\n",(0,r.jsxs)(n.p,{children:["By default the order is set to ascending, this can be changed to descending by setting the param ",(0,r.jsx)(n.code,{children:"orderDecending: true"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderBy: (t) => t.name,\n  orderDescending: true,\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example we fetch all companies and sort them by their name in descending order."}),"\n",(0,r.jsxs)(n.p,{children:["To order by several different columns use ",(0,r.jsx)(n.code,{children:"orderByList"}),", note that this cannot be used in conjunction with ",(0,r.jsx)(n.code,{children:"orderBy"})," and ",(0,r.jsx)(n.code,{children:"orderDescending"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderByList: (t) => [\n    Order(column: t.name, orderDescending: true), \n    Order(column: t.id),\n  ],\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example we fetch all companies and sort them by their name in descending order, and then by their id in ascending order."}),"\n",(0,r.jsx)(n.h2,{id:"sort-on-relations",children:"Sort on relations"}),"\n",(0,r.jsx)(n.p,{children:"To sort based on a field from a related model, use the chained field reference."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderBy: (t) => t.ceo.name,\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example we fetch all companies and sort them by their CEO's name."}),"\n",(0,r.jsxs)(n.p,{children:["You can order results based on the count of a list relation (1",":n",")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderBy: (t) => t.employees.count(),\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example we fetch all companies and sort them by the number of employees."}),"\n",(0,r.jsx)(n.p,{children:"The count used for sorting can also be filtered using a sub-filter."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"var companies = await Company.db.find(\n  session,\n  orderBy: (t) => t.employees.count(\n    (employee) => employee.role.equals('developer'),\n  ),\n);\n"})}),"\n",(0,r.jsx)(n.p,{children:'In the example we fetch all companies and sort them by the number of employees with the role of "developer".'})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var s=t(96540);const r={},a=s.createContext(r);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);