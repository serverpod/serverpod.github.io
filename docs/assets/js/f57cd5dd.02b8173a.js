"use strict";(globalThis.webpackChunkserverpod_docs=globalThis.webpackChunkserverpod_docs||[]).push([[59139],{45274(n,e,o){o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"concepts/authentication/providers/anonymous/customizing-the-ui","title":"Customizing the UI","description":"When using the anonymous identity provider, you can customize the UI to your liking. You can use the AnonymousSignInWidget to display the anonymous sign-in button in your own layout, or you can use the AnonymousAuthController to build a completely custom authentication interface.","source":"@site/docs/06-concepts/11-authentication/04-providers/00-anonymous/03-customizing-the-ui.md","sourceDirName":"06-concepts/11-authentication/04-providers/00-anonymous","slug":"/concepts/authentication/providers/anonymous/customizing-the-ui","permalink":"/next/concepts/authentication/providers/anonymous/customizing-the-ui","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/11-authentication/04-providers/00-anonymous/03-customizing-the-ui.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/next/concepts/authentication/providers/anonymous/configuration"},"next":{"title":"Setup","permalink":"/next/concepts/authentication/providers/email/setup"}}');var i=o(74848),s=o(28453);const r={},a="Customizing the UI",c={},l=[{value:"Using the <code>AnonymousSignInWidget</code>",id:"using-the-anonymoussigninwidget",level:2},{value:"Customizing the button appearance",id:"customizing-the-button-appearance",level:3},{value:"Building a custom UI with the <code>AnonymousAuthController</code>",id:"building-a-custom-ui-with-the-anonymousauthcontroller",level:2},{value:"AnonymousAuthController state management",id:"anonymousauthcontroller-state-management",level:3},{value:"AnonymousAuthController methods",id:"anonymousauthcontroller-methods",level:3}];function u(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"customizing-the-ui",children:"Customizing the UI"})}),"\n",(0,i.jsxs)(e.p,{children:["When using the anonymous identity provider, you can customize the UI to your liking. You can use the ",(0,i.jsx)(e.code,{children:"AnonymousSignInWidget"})," to display the anonymous sign-in button in your own layout, or you can use the ",(0,i.jsx)(e.code,{children:"AnonymousAuthController"})," to build a completely custom authentication interface."]}),"\n",(0,i.jsxs)(e.admonition,{type:"info",children:[(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"SignInWidget"})," uses the ",(0,i.jsx)(e.code,{children:"AnonymousSignInWidget"})," internally when the anonymous provider is enabled. You can supply a custom ",(0,i.jsx)(e.code,{children:"AnonymousSignInWidget"})," to the ",(0,i.jsx)(e.code,{children:"SignInWidget"})," to override the default (e.g. to pass ",(0,i.jsx)(e.code,{children:"createAnonymousToken"})," or change size and shape)."]}),(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"SignInWidget(\n  client: client,\n  anonymousSignInWidget: AnonymousSignInWidget(\n    client: client,\n    createAnonymousToken: () async => await getAppCheckToken(),\n    size: AnonymousButtonSize.medium,\n    shape: AnonymousButtonShape.rectangular,\n  ),\n)\n"})})]}),"\n",(0,i.jsxs)(e.h2,{id:"using-the-anonymoussigninwidget",children:["Using the ",(0,i.jsx)(e.code,{children:"AnonymousSignInWidget"})]}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"AnonymousSignInWidget"}),' displays a single "Continue without account" button that starts the anonymous sign-in flow when pressed. You can customize the widget\'s behavior and appearance using its constructor parameters:']}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\n\nAnonymousSignInWidget(\n  client: client,\n  createAnonymousToken: () async {\n    // Optional: provide a token for app attestation (e.g. Firebase App Check)\n    return await getAppCheckToken();\n  },\n  onAuthenticated: () {\n    // Do something when the user is authenticated.\n    //\n    // NOTE: You should not navigate to the home screen here, otherwise\n    // the user will have to sign in again every time they open the app.\n  },\n  onError: (error) {\n    // Handle errors\n  },\n  size: AnonymousButtonSize.large, // large (default), medium, or small\n  shape: AnonymousButtonShape.pill, // pill (default) or rectangular\n)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Optionally, you can provide an externally managed ",(0,i.jsx)(e.code,{children:"AnonymousAuthController"})," instance to the widget. When a controller is provided, ",(0,i.jsx)(e.code,{children:"client"}),", ",(0,i.jsx)(e.code,{children:"onAuthenticated"}),", and ",(0,i.jsx)(e.code,{children:"onError"})," are ignored in favor of the controller's configuration."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"AnonymousSignInWidget(\n  controller: controller,\n  size: AnonymousButtonSize.medium,\n  shape: AnonymousButtonShape.rectangular,\n)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"customizing-the-button-appearance",children:"Customizing the button appearance"}),"\n",(0,i.jsxs)(e.p,{children:["The widget renders a single ",(0,i.jsx)(e.strong,{children:"TextButton"})," with the label \"Continue without account\". The button uses Flutter's material design system, so it reacts to your app's ",(0,i.jsx)(e.code,{children:"Theme"}),". You can wrap the widget in a ",(0,i.jsx)(e.code,{children:"Theme"})," (or ",(0,i.jsx)(e.code,{children:"ThemeData"}),") to change colors and typography:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"Theme(\n  data: Theme.of(context).copyWith(\n    colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),\n    textButtonTheme: TextButtonThemeData(\n      style: TextButton.styleFrom(\n        foregroundColor: Colors.blue,\n      ),\n    ),\n  ),\n  child: AnonymousSignInWidget(client: client),\n)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["The widget constrains the button to a minimum width of 240 and maximum width of 400; you can place it in a ",(0,i.jsx)(e.code,{children:"SizedBox"}),", ",(0,i.jsx)(e.code,{children:"Expanded"}),", or ",(0,i.jsx)(e.code,{children:"Flex"})," to control layout."]}),"\n",(0,i.jsxs)(e.h2,{id:"building-a-custom-ui-with-the-anonymousauthcontroller",children:["Building a custom UI with the ",(0,i.jsx)(e.code,{children:"AnonymousAuthController"})]}),"\n",(0,i.jsxs)(e.p,{children:["For full control over the UI, use the ",(0,i.jsx)(e.code,{children:"AnonymousAuthController"})," class. It provides the anonymous sign-in logic without any built-in widget, so you can trigger login from your own button or flow and build a completely custom layout."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\n\nfinal controller = AnonymousAuthController(\n  client: client,\n  createAnonymousToken: () async => await getAppCheckToken(),\n  onAuthenticated: () {\n    // Do something when the user is authenticated.\n  },\n  onError: (error) {\n    // Handle errors\n  },\n);\n"})}),"\n",(0,i.jsx)(e.h3,{id:"anonymousauthcontroller-state-management",children:"AnonymousAuthController state management"}),"\n",(0,i.jsx)(e.p,{children:"The controller notifies listeners when its state changes. Use these properties to drive your UI:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"// Check if a request is in progress\nfinal isLoading = controller.isLoading;\n\n// Check current state (idle, loading, error, authenticated)\nfinal state = controller.state;\n\n// Listen to state changes\ncontroller.addListener(() {\n  setState(() {\n    // Rebuild when controller state changes\n  });\n});\n"})}),"\n",(0,i.jsx)(e.h3,{id:"anonymousauthcontroller-methods",children:"AnonymousAuthController methods"}),"\n",(0,i.jsx)(e.p,{children:"The controller exposes a single action for anonymous sign-in:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dart",children:"// Start anonymous sign-in.\n// Obtains token if `createAnonymousToken` is set, then calls the login endpoint.\nawait controller.login();\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Call ",(0,i.jsx)(e.code,{children:"controller.login()"})," from your custom button's ",(0,i.jsx)(e.code,{children:"onPressed"}),", or from any other trigger (e.g. after a delay or when the user performs an action). The controller handles loading state, success, and errors and invokes ",(0,i.jsx)(e.code,{children:"onAuthenticated"})," or ",(0,i.jsx)(e.code,{children:"onError"})," as appropriate."]}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsxs)(e.p,{children:["Remember to dispose the controller when it is no longer needed (e.g. in your widget's ",(0,i.jsx)(e.code,{children:"dispose"}),"), unless the widget manages its own controller and disposes it for you."]})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(u,{...n})}):u(n)}},28453(n,e,o){o.d(e,{R:()=>r,x:()=>a});var t=o(96540);const i={},s=t.createContext(i);function r(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);