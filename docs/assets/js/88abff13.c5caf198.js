"use strict";(globalThis.webpackChunkserverpod_docs=globalThis.webpackChunkserverpod_docs||[]).push([[17694],{21995(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"concepts/authentication/providers/facebook/setup","title":"Setup","description":"Facebook authentication in Serverpod is provided through an external package that handles the complete sign-in flow on iOS, Android, Web, and macOS. Unlike other providers built into the core auth module, Facebook Sign-In requires an additional package installation.","source":"@site/docs/06-concepts/11-authentication/04-providers/05-facebook/01-setup.md","sourceDirName":"06-concepts/11-authentication/04-providers/05-facebook","slug":"/concepts/authentication/providers/facebook/setup","permalink":"/next/concepts/authentication/providers/facebook/setup","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/11-authentication/04-providers/05-facebook/01-setup.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Customizing the UI","permalink":"/next/concepts/authentication/providers/apple/customizing-the-ui"},"next":{"title":"Configuration","permalink":"/next/concepts/authentication/providers/facebook/configuration"}}');var s=i(74848),r=i(28453);const t={},a="Setup",d={},c=[{value:"Create your Facebook App",id:"create-your-facebook-app",level:2},{value:"Configure Facebook Login",id:"configure-facebook-login",level:3},{value:"1. Permissions and features",id:"1-permissions-and-features",level:4},{value:"2. Settings",id:"2-settings",level:4},{value:"3. Quickstart",id:"3-quickstart",level:4},{value:"Get app credentials",id:"get-app-credentials",level:3},{value:"Server-side configuration",id:"server-side-configuration",level:2},{value:"Store the credentials",id:"store-the-credentials",level:3},{value:"Configure the Facebook identity provider",id:"configure-the-facebook-identity-provider",level:3},{value:"Expose the endpoint",id:"expose-the-endpoint",level:3},{value:"Generate and migrate",id:"generate-and-migrate",level:3},{value:"Basic configuration options",id:"basic-configuration-options",level:3},{value:"Client-side configuration",id:"client-side-configuration",level:2},{value:"Install required packages",id:"install-required-packages",level:3},{value:"Android",id:"android",level:3},{value:"Add Facebook SDK configuration",id:"add-facebook-sdk-configuration",level:4},{value:"Configure Package Visibility (Android 11+)",id:"configure-package-visibility-android-11",level:4},{value:"Configure Android platform in Facebook",id:"configure-android-platform-in-facebook",level:4},{value:"iOS",id:"ios",level:3},{value:"Configure iOS platform in Facebook",id:"configure-ios-platform-in-facebook",level:4},{value:"iOS App Tracking Transparency (ATT)",id:"ios-app-tracking-transparency-att",level:4},{value:"Web",id:"web",level:3},{value:"Configure Web platform in Facebook",id:"configure-web-platform-in-facebook",level:4},{value:"macOS",id:"macos",level:3},{value:"Enable Network Capabilities",id:"enable-network-capabilities",level:4},{value:"Enable Keychain Sharing",id:"enable-keychain-sharing",level:4},{value:"Initialize the FacebookSignInService",id:"initialize-the-facebooksigninservice",level:4},{value:"Configure macOS platform in Facebook",id:"configure-macos-platform-in-facebook",level:4},{value:"Present the authentication UI",id:"present-the-authentication-ui",level:2},{value:"Initializing the <code>FacebookSignInService</code>",id:"initializing-the-facebooksigninservice",level:3},{value:"Using the <code>FacebookSignInWidget</code>",id:"using-the-facebooksigninwidget",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"setup",children:"Setup"})}),"\n",(0,s.jsx)(n.p,{children:"Facebook authentication in Serverpod is provided through an external package that handles the complete sign-in flow on iOS, Android, Web, and macOS. Unlike other providers built into the core auth module, Facebook Sign-In requires an additional package installation."}),"\n",(0,s.jsxs)(n.p,{children:["To set up ",(0,s.jsx)(n.strong,{children:"Sign in with Facebook"}),", you must create an App with use case ",(0,s.jsx)(n.strong,{children:"Authenticate with Facebook Login"})," on ",(0,s.jsx)(n.a,{href:"https://developers.facebook.com/",children:"Facebook for Developers"})," and configure your Serverpod application accordingly."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Right now, we have official support for iOS, Android, Web, and macOS for Facebook Sign In."})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["You need to install the auth module before you continue, see ",(0,s.jsx)(n.a,{href:"../../setup",children:"Setup"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"create-your-facebook-app",children:"Create your Facebook App"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.a,{href:"https://developers.facebook.com/apps/creation/",children:"Facebook for Developers"})," and log in with your Facebook account."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create an app"})," and follow the setup wizard:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"App details"}),": Enter your ",(0,s.jsx)(n.strong,{children:"App name"})," and ",(0,s.jsx)(n.strong,{children:"App contact email"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),": Select ",(0,s.jsx)(n.strong,{children:'"Authenticate and request data from users with Facebook Login"'}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Business"}),": Optionally select a ",(0,s.jsx)(n.strong,{children:"Business Portfolio"})," if available."]}),"\n",(0,s.jsxs)(n.li,{children:["Complete any additional ",(0,s.jsx)(n.strong,{children:"Requirements"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Click through to the ",(0,s.jsx)(n.strong,{children:"Overview"})," page and go to your app ",(0,s.jsx)(n.strong,{children:"Dashboard"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"configure-facebook-login",children:"Configure Facebook Login"}),"\n",(0,s.jsxs)(n.p,{children:["After creating your app, click the ",(0,s.jsx)(n.strong,{children:"Customize"})," button next to ",(0,s.jsx)(n.strong,{children:'"Authenticate and request data from users with Facebook Login"'})," on the ",(0,s.jsx)(n.strong,{children:"Dashboard"})," or ",(0,s.jsx)(n.strong,{children:"Use cases"})," page. This opens the customization page with the following menu options:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Use Case Customize",src:i(89345).A+"",width:"1991",height:"367"})}),"\n",(0,s.jsx)(n.h4,{id:"1-permissions-and-features",children:"1. Permissions and features"}),"\n",(0,s.jsx)(n.p,{children:"Configure the permissions your application will request:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"public_profile"}),": Added by default, allows access to basic profile information."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"email"}),": Recommended. Allows to read a person's primary email address."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Permissions and Features",src:i(5634).A+"",width:"2433",height:"646"})}),"\n",(0,s.jsx)(n.h4,{id:"2-settings",children:"2. Settings"}),"\n",(0,s.jsx)(n.p,{children:"Configure the authentication settings:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.strong,{children:"Allowed Domains for the JavaScript SDK"}),", add:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"https://www.facebook.com"})," (required to avoid CORS issues)"]}),"\n",(0,s.jsxs)(n.li,{children:["Your own domain if you plan to support web authentication (e.g., ",(0,s.jsx)(n.code,{children:"https://yourdomain.com"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Allowed Domains",src:i(16571).A+"",width:"1780",height:"192"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"3-quickstart",children:"3. Quickstart"}),"\n",(0,s.jsx)(n.p,{children:"Set up your platforms by selecting and configuring:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"iOS"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Android"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Web"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Other"})," (for additional platforms like macOS)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Save your changes after completing the configuration."}),"\n",(0,s.jsx)(n.h3,{id:"get-app-credentials",children:"Get app credentials"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"App settings"})," > ",(0,s.jsx)(n.strong,{children:"Basic"})," in your Facebook App Dashboard to retrieve:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"App ID"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"App secret"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"App settings"})," > ",(0,s.jsx)(n.strong,{children:"Advanced"})," to retrieve:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Client token"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"App secret"})," is sensitive. Keep it confidential and never commit it to version control. The ",(0,s.jsx)(n.strong,{children:"Client token"})," is required for some platforms (especially mobile and web)."]})}),"\n",(0,s.jsx)(n.h2,{id:"server-side-configuration",children:"Server-side configuration"}),"\n",(0,s.jsx)(n.h3,{id:"store-the-credentials",children:"Store the credentials"}),"\n",(0,s.jsxs)(n.p,{children:["Add your Facebook credentials to the ",(0,s.jsx)(n.code,{children:"config/passwords.yaml"})," file, or set them as environment variables ",(0,s.jsx)(n.code,{children:"SERVERPOD_PASSWORD_facebookAppId"})," and ",(0,s.jsx)(n.code,{children:"SERVERPOD_PASSWORD_facebookAppSecret"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"development:\n  facebookAppId: 'YOUR_FACEBOOK_APP_ID'\n  facebookAppSecret: 'YOUR_FACEBOOK_APP_SECRET'\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Keep your App secret confidential. Never commit this value to version control. Store it securely using environment variables or secret management."})}),"\n",(0,s.jsx)(n.h3,{id:"configure-the-facebook-identity-provider",children:"Configure the Facebook identity provider"}),"\n",(0,s.jsxs)(n.p,{children:["In your main ",(0,s.jsx)(n.code,{children:"server.dart"})," file, configure the Facebook identity provider:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod/serverpod.dart';\nimport 'package:serverpod_auth_idp_server/core.dart';\nimport 'package:serverpod_auth_idp_server/providers/facebook.dart';\n\nvoid run(List<String> args) async {\n  final pod = Serverpod(\n    args,\n    Protocol(),\n    Endpoints(),\n  );\n\n  pod.initializeAuthServices(\n    tokenManagerBuilders: [\n      JwtConfigFromPasswords(),\n    ],\n    identityProviderBuilders: [\n      FacebookIdpConfig(\n        appId: pod.getPassword('facebookAppId')!,\n        appSecret: pod.getPassword('facebookAppSecret')!,\n      ),\n    ],\n  );\n\n  await pod.start();\n}\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:"FacebookIdpConfigFromPasswords()"})," to automatically load credentials from ",(0,s.jsx)(n.code,{children:"config/passwords.yaml"})," or the ",(0,s.jsx)(n.code,{children:"SERVERPOD_PASSWORD_facebookAppId"})," and ",(0,s.jsx)(n.code,{children:"SERVERPOD_PASSWORD_facebookAppSecret"})," environment variables:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"identityProviderBuilders: [\n  FacebookIdpConfigFromPasswords(),\n],\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"expose-the-endpoint",children:"Expose the endpoint"}),"\n",(0,s.jsxs)(n.p,{children:["Create an endpoint that extends ",(0,s.jsx)(n.code,{children:"FacebookIdpBaseEndpoint"})," to expose the Facebook authentication API:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_server/providers/facebook.dart';\n\nclass FacebookIdpEndpoint extends FacebookIdpBaseEndpoint {}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"generate-and-migrate",children:"Generate and migrate"}),"\n",(0,s.jsxs)(n.p,{children:["Finally, run ",(0,s.jsx)(n.code,{children:"serverpod generate"})," to generate the client code and create a migration to initialize the database for the provider. More detailed instructions can be found in the general ",(0,s.jsx)(n.a,{href:"../../setup#identity-providers-configuration",children:"identity providers setup section"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"basic-configuration-options",children:"Basic configuration options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"appId"}),": Required. The App ID of your Facebook App."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"appSecret"}),": Required. The App secret of your Facebook App."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more details on configuration options, see the ",(0,s.jsx)(n.a,{href:"./configuration",children:"configuration section"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"client-side-configuration",children:"Client-side configuration"}),"\n",(0,s.jsx)(n.h3,{id:"install-required-packages",children:"Install required packages"}),"\n",(0,s.jsxs)(n.p,{children:["Add the ",(0,s.jsx)(n.code,{children:"serverpod_auth_idp_flutter_facebook"})," package to your Flutter project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"flutter pub add serverpod_auth_idp_flutter_facebook\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This package uses ",(0,s.jsx)(n.a,{href:"https://pub.dev/packages/flutter_facebook_auth",children:(0,s.jsx)(n.code,{children:"flutter_facebook_auth"})})," to handle the authentication flow. The documentation for that package should in most cases also apply to this setup."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Unlike providers such as Google or Apple that are built into the core ",(0,s.jsx)(n.code,{children:"serverpod_auth_idp_flutter"})," package, Facebook authentication is provided as a separate external package. This keeps the core package lightweight while allowing you to opt-in to Facebook authentication when needed."]})}),"\n",(0,s.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,s.jsxs)(n.p,{children:["The minimum Android SDK version required is 21. Update your ",(0,s.jsx)(n.code,{children:"android/app/build.gradle"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-gradle",children:"defaultConfig {\n    ...\n    minSdkVersion 21\n    ...\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"add-facebook-sdk-configuration",children:"Add Facebook SDK configuration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open or create ",(0,s.jsx)(n.code,{children:"/android/app/src/main/res/values/strings.xml"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<resources>\n    <string name="facebook_app_id">YOUR_FACEBOOK_APP_ID</string>\n    <string name="fb_login_protocol_scheme">fbYOUR_FACEBOOK_APP_ID</string>\n    <string name="facebook_client_token">YOUR_CLIENT_TOKEN</string>\n</resources>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"YOUR_FACEBOOK_APP_ID"})," with your App ID and ",(0,s.jsx)(n.code,{children:"YOUR_CLIENT_TOKEN"})," with your Client token (found in ",(0,s.jsx)(n.strong,{children:"Settings"})," > ",(0,s.jsx)(n.strong,{children:"Advanced"})," > ",(0,s.jsx)(n.strong,{children:"Client token"})," in the Facebook App Dashboard)."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open ",(0,s.jsx)(n.code,{children:"/android/app/src/main/AndroidManifest.xml"})," and add the following:"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Add internet permission before the ",(0,s.jsx)(n.code,{children:"<application>"})," element:"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.INTERNET"/>\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Add meta-data inside the ",(0,s.jsx)(n.code,{children:"<application>"})," element:"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<application>\n    ...\n    <meta-data\n        android:name="com.facebook.sdk.ApplicationId"\n        android:value="@string/facebook_app_id"/>\n    <meta-data\n        android:name="com.facebook.sdk.ClientToken"\n        android:value="@string/facebook_client_token"/>\n    ...\n</application>\n'})}),"\n",(0,s.jsx)(n.h4,{id:"configure-package-visibility-android-11",children:"Configure Package Visibility (Android 11+)"}),"\n",(0,s.jsxs)(n.p,{children:["For Android 11 and above, add the following inside the ",(0,s.jsx)(n.code,{children:"<manifest>"})," element:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<manifest package="com.example.app">\n    <queries>\n        <provider android:authorities="com.facebook.katana.provider.PlatformProvider" />\n    </queries>\n    ...\n</manifest>\n'})}),"\n",(0,s.jsx)(n.h4,{id:"configure-android-platform-in-facebook",children:"Configure Android platform in Facebook"}),"\n",(0,s.jsxs)(n.p,{children:["In the Facebook App Dashboard, go to ",(0,s.jsx)(n.strong,{children:"Use cases"})," > ",(0,s.jsx)(n.strong,{children:"Customize"})," > ",(0,s.jsx)(n.strong,{children:"Quickstart"})," and select the ",(0,s.jsx)(n.strong,{children:"Android"})," tab."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Quickstart Android",src:i(93191).A+"",width:"2525",height:"1556"})}),"\n",(0,s.jsx)(n.p,{children:"Follow these steps:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3: Tell Us about Your Android Project"})}),"\n",(0,s.jsx)(n.p,{children:"Fill in your Android app details:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Package Name"}),": Your app's package identifier (found in ",(0,s.jsx)(n.code,{children:"android/app/build.gradle"})," as ",(0,s.jsx)(n.code,{children:"applicationId"})," or in ",(0,s.jsx)(n.code,{children:"AndroidManifest.xml"})," as ",(0,s.jsx)(n.code,{children:"package"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Class Name"}),": Your main activity class name (typically ",(0,s.jsx)(n.code,{children:"MainActivity"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Package Name",src:i(14153).A+"",width:"1624",height:"826"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Add Your Development and Release Key Hashes"})}),"\n",(0,s.jsx)(n.p,{children:"Generate and add your key hashes:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Debug Key Hash (for development):"})}),"\n",(0,s.jsx)(n.p,{children:"macOS/Linux:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64\n"})}),"\n",(0,s.jsx)(n.p,{children:"Windows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'keytool -exportcert -alias androiddebugkey -keystore "C:\\Users\\USERNAME\\.android\\debug.keystore" | "PATH_TO_OPENSSL_LIBRARY\\bin\\openssl" sha1 -binary | "PATH_TO_OPENSSL_LIBRARY\\bin\\openssl" base64\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Release Key Hash (for production):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"keytool -exportcert -alias YOUR_RELEASE_KEY_ALIAS -keystore YOUR_RELEASE_KEY_PATH | openssl sha1 -binary | openssl base64\n"})}),"\n",(0,s.jsx)(n.p,{children:"Paste the generated key hashes into the Facebook console and save."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Add Key Hashes",src:i(70428).A+"",width:"1621",height:"365"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"You can skip the remaining steps (1, 2, 5, 6+) as they are not required for Flutter apps or have already been covered."})}),"\n",(0,s.jsxs)(n.p,{children:["For more detailed Android setup instructions, refer to the ",(0,s.jsx)(n.a,{href:"https://facebook.meedu.app/docs/7.x.x/android",children:"flutter_facebook_auth Android documentation"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,s.jsxs)(n.p,{children:["The minimum iOS deployment target is 12.0. Update your ",(0,s.jsx)(n.code,{children:"ios/Podfile"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",children:"platform :ios, '12.0'\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Also set the deployment target to 12.0 in Xcode (",(0,s.jsx)(n.strong,{children:"Runner"})," > ",(0,s.jsx)(n.strong,{children:"General"})," > ",(0,s.jsx)(n.strong,{children:"Deployment Info"}),")."]}),"\n",(0,s.jsx)(n.h4,{id:"configure-ios-platform-in-facebook",children:"Configure iOS platform in Facebook"}),"\n",(0,s.jsxs)(n.p,{children:["In the Facebook App Dashboard, go to ",(0,s.jsx)(n.strong,{children:"Use cases"})," > ",(0,s.jsx)(n.strong,{children:"Customize"})," > ",(0,s.jsx)(n.strong,{children:"Quickstart"})," and select the ",(0,s.jsx)(n.strong,{children:"iOS"})," tab."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Quickstart iOS",src:i(52584).A+"",width:"2525",height:"1652"})}),"\n",(0,s.jsx)(n.p,{children:"Follow these steps:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Add your Bundle Identifier"})}),"\n",(0,s.jsxs)(n.p,{children:["Enter your iOS app's Bundle Identifier (found in Xcode under ",(0,s.jsx)(n.strong,{children:"Runner"})," > ",(0,s.jsx)(n.strong,{children:"General"})," > ",(0,s.jsx)(n.strong,{children:"Identity"})," or in your ",(0,s.jsx)(n.code,{children:"Info.plist"}),")."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"iOS Bundle ID",src:i(49698).A+"",width:"1624",height:"417"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Configure Your info.plist"})}),"\n",(0,s.jsxs)(n.p,{children:["Open ",(0,s.jsx)(n.code,{children:"ios/Runner/Info.plist"})," and add the following configuration (replace placeholders with your actual values):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<key>CFBundleURLTypes</key>\n<array>\n  <dict>\n    <key>CFBundleURLSchemes</key>\n    <array>\n      <string>fbYOUR_APP_ID</string>\n    </array>\n  </dict>\n</array>\n<key>FacebookAppID</key>\n<string>YOUR_APP_ID</string>\n<key>FacebookClientToken</key>\n<string>YOUR_CLIENT_TOKEN</string>\n<key>FacebookDisplayName</key>\n<string>YOUR_APP_NAME</string>\n<key>LSApplicationQueriesSchemes</key>\n<array>\n  <string>fbapi</string>\n  <string>fb-messenger-share-api</string>\n</array>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"YOUR_APP_ID"})," with your Facebook App ID, ",(0,s.jsx)(n.code,{children:"YOUR_CLIENT_TOKEN"})," with your Client token, and ",(0,s.jsx)(n.code,{children:"YOUR_APP_NAME"})," with your app's name."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If you have other providers (like Google) implemented, merge the values for ",(0,s.jsx)(n.code,{children:"CFBundleURLTypes"})," and ",(0,s.jsx)(n.code,{children:"LSApplicationQueriesSchemes"})," instead of creating duplicate keys."]})}),"\n",(0,s.jsxs)(n.p,{children:["Additionally, ensure that the ",(0,s.jsx)(n.strong,{children:"Keychain Sharing"})," capability is enabled for your target in Xcode (",(0,s.jsx)(n.strong,{children:"Runner"})," > ",(0,s.jsx)(n.strong,{children:"Signing & Capabilities"})," > ",(0,s.jsx)(n.strong,{children:"+ Capability"})," > ",(0,s.jsx)(n.strong,{children:"Keychain Sharing"}),")."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"You can skip the remaining steps (1, 3, 5-9) as they are not required for Flutter apps or have already been covered."})}),"\n",(0,s.jsx)(n.h4,{id:"ios-app-tracking-transparency-att",children:"iOS App Tracking Transparency (ATT)"}),"\n",(0,s.jsxs)(n.p,{children:["On iOS, Facebook may issue ",(0,s.jsx)(n.strong,{children:"limited access tokens"})," when App Tracking Transparency (ATT) permission is not granted. These limited tokens cannot be validated by the server or used to retrieve user profile data, which will cause authentication to fail."]}),"\n",(0,s.jsxs)(n.p,{children:["To ensure full Facebook authentication functionality on iOS, you should request ATT permissions before initiating Facebook Sign In. You can use the ",(0,s.jsx)(n.a,{href:"https://pub.dev/packages/app_tracking_transparency",children:(0,s.jsx)(n.code,{children:"app_tracking_transparency"})})," package to handle this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:app_tracking_transparency/app_tracking_transparency.dart';\n\n// Request tracking authorization before showing Facebook Sign In\nfinal status = await AppTrackingTransparency.requestTrackingAuthorization();\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Without ATT permission granted, Facebook authentication fails on iOS. Consider requesting this permission early in your app's flow or before showing the Facebook Sign In button."})}),"\n",(0,s.jsxs)(n.p,{children:["For more detailed iOS setup instructions, refer to the ",(0,s.jsx)(n.a,{href:"https://facebook.meedu.app/docs/7.x.x/ios",children:"flutter_facebook_auth iOS documentation"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"web",children:"Web"}),"\n",(0,s.jsx)(n.p,{children:"For web platforms, you must initialize the FacebookSignInService with your App ID:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"await client.auth.initializeFacebookSignIn(\n  appId: 'YOUR_FACEBOOK_APP_ID',\n);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"configure-web-platform-in-facebook",children:"Configure Web platform in Facebook"}),"\n",(0,s.jsxs)(n.p,{children:["In the Facebook App Dashboard, go to ",(0,s.jsx)(n.strong,{children:"Use cases"})," > ",(0,s.jsx)(n.strong,{children:"Customize"})," > ",(0,s.jsx)(n.strong,{children:"Quickstart"})," and select the ",(0,s.jsx)(n.strong,{children:"Web"})," tab."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Quickstart Web",src:i(52119).A+"",width:"2525",height:"1214"})}),"\n",(0,s.jsx)(n.p,{children:"Follow these steps:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Add Site URL in Quickstart"})}),"\n",(0,s.jsxs)(n.p,{children:["Enter your website's Site URL (e.g., ",(0,s.jsx)(n.code,{children:"https://yourdomain.com"}),") and save your changes."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"You can skip the remaining steps (2-5) as they are not required for Flutter apps or have already been covered."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Configure Allowed Domains in Settings (Important)"})}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Use cases"})," > ",(0,s.jsx)(n.strong,{children:"Customize"})," > ",(0,s.jsx)(n.strong,{children:"Settings"})," and find ",(0,s.jsx)(n.strong,{children:"Allowed Domains for the JavaScript SDK"}),". Add all domains where your app will be accessible:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Add your development domain: ",(0,s.jsx)(n.code,{children:"http://localhost:PORT"})," (e.g., ",(0,s.jsx)(n.code,{children:"http://localhost:56635"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Add your production domain: ",(0,s.jsx)(n.code,{children:"https://yourdomain.com"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This configuration enables Facebook authentication to work on these domains. Without this, Facebook Sign In will fail due to CORS restrictions."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Allowed Domains",src:i(16571).A+"",width:"1780",height:"192"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["The facebook javascript SDK is only allowed to use with ",(0,s.jsx)(n.code,{children:"https"})," but you can test the plugin in your localhost with an error message in your web console."]})}),"\n",(0,s.jsxs)(n.p,{children:["For more detailed web setup instructions, refer to the ",(0,s.jsx)(n.a,{href:"https://facebook.meedu.app/docs/7.x.x/web",children:"flutter_facebook_auth web documentation"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"macos",children:"macOS"}),"\n",(0,s.jsx)(n.h4,{id:"enable-network-capabilities",children:"Enable Network Capabilities"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:"macos/Runner/Info.plist"}),", add:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<key>com.apple.security.network.server</key>\n<true/>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In Xcode, select the ",(0,s.jsx)(n.strong,{children:"Runner"})," target, go to ",(0,s.jsx)(n.strong,{children:"Signing & Capabilities"}),", and enable ",(0,s.jsx)(n.strong,{children:"Outgoing Connections"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"enable-keychain-sharing",children:"Enable Keychain Sharing"}),"\n",(0,s.jsxs)(n.p,{children:["macOS uses ",(0,s.jsx)(n.code,{children:"flutter_secure_storage"})," to securely store session data. Add the ",(0,s.jsx)(n.strong,{children:"Keychain Sharing"})," capability in Xcode (",(0,s.jsx)(n.strong,{children:"Runner"})," > ",(0,s.jsx)(n.strong,{children:"Signing & Capabilities"})," > ",(0,s.jsx)(n.strong,{children:"+ Capability"})," > ",(0,s.jsx)(n.strong,{children:"Keychain Sharing"}),")."]}),"\n",(0,s.jsx)(n.h4,{id:"initialize-the-facebooksigninservice",children:"Initialize the FacebookSignInService"}),"\n",(0,s.jsx)(n.p,{children:"For macOS, you must initialize the FacebookSignInService with your App ID:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"await client.auth.initializeFacebookSignIn(\n  appId: 'YOUR_FACEBOOK_APP_ID',\n);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"configure-macos-platform-in-facebook",children:"Configure macOS platform in Facebook"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Configure settings"})}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Use cases"})," > ",(0,s.jsx)(n.strong,{children:"Customize"})," > ",(0,s.jsx)(n.strong,{children:"Settings"})," and configure the following:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.strong,{children:"Login from Devices"})," under ",(0,s.jsx)(n.strong,{children:"Client OAuth settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.strong,{children:"Login with the JavaScript SDK"})," under ",(0,s.jsx)(n.strong,{children:"Client OAuth settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.strong,{children:"Allowed Domains for the JavaScript SDK"}),", add ",(0,s.jsx)(n.code,{children:"https://www.facebook.com"})," to avoid CORS issues."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Use cases Settings",src:i(77300).A+"",width:"2524",height:"1557"})}),"\n",(0,s.jsxs)(n.p,{children:["For more detailed macOS setup instructions, refer to the ",(0,s.jsx)(n.a,{href:"https://facebook.meedu.app/docs/7.x.x/macos",children:"flutter_facebook_auth macOS documentation"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"present-the-authentication-ui",children:"Present the authentication UI"}),"\n",(0,s.jsxs)(n.h3,{id:"initializing-the-facebooksigninservice",children:["Initializing the ",(0,s.jsx)(n.code,{children:"FacebookSignInService"})]}),"\n",(0,s.jsxs)(n.p,{children:["To use the FacebookSignInService, you need to initialize it in your main function. The initialization is done from the ",(0,s.jsx)(n.code,{children:"initializeFacebookSignIn()"})," extension method on the ",(0,s.jsx)(n.code,{children:"FlutterAuthSessionManager"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter_facebook/serverpod_auth_idp_flutter_facebook.dart';\nimport 'package:your_client/your_client.dart';\n\nfinal client = Client('http://localhost:8080/')\n  ..authSessionManager = FlutterAuthSessionManager();\n\nvoid main() {\n  client.auth.initialize();\n  client.auth.initializeFacebookSignIn();\n}\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"For web and macOS platforms, you must provide your Facebook App ID during initialization:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"client.auth.initializeFacebookSignIn(\n  appId: 'YOUR_FACEBOOK_APP_ID',\n);\n"})}),(0,s.jsx)(n.p,{children:"For iOS and Android, the App ID is not required as the SDK reads credentials from native configuration."})]}),"\n",(0,s.jsxs)(n.h3,{id:"using-the-facebooksigninwidget",children:["Using the ",(0,s.jsx)(n.code,{children:"FacebookSignInWidget"})]}),"\n",(0,s.jsxs)(n.p,{children:["If you have configured the ",(0,s.jsx)(n.code,{children:"SignInWidget"})," as described in the ",(0,s.jsx)(n.a,{href:"../../setup#present-the-authentication-ui",children:"setup section"}),", the Facebook identity provider will be automatically detected and displayed in the sign-in widget (provided you've installed the ",(0,s.jsx)(n.code,{children:"serverpod_auth_idp_flutter_facebook"})," package and initialized the service)."]}),"\n",(0,s.jsxs)(n.p,{children:["You can also use the ",(0,s.jsx)(n.code,{children:"FacebookSignInWidget"})," to include the Facebook authentication flow in your own custom UI:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter_facebook/serverpod_auth_idp_flutter_facebook.dart';\n\nFacebookSignInWidget(\n  client: client,\n  onAuthenticated: () {\n    // Do something when the user is authenticated.\n    //\n    // NOTE: You should not navigate to the home screen here, otherwise\n    // the user will have to sign in again every time they open the app.\n  },\n  onError: (error) {\n    // Handle errors\n    ScaffoldMessenger.of(context).showSnackBar(\n      SnackBar(content: Text('Error: $error')),\n    );\n  },\n)\n"})}),"\n",(0,s.jsx)(n.p,{children:"The widget automatically handles:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Facebook Sign-In flow for iOS, Android, Web, and macOS."}),"\n",(0,s.jsx)(n.li,{children:"Token management."}),"\n",(0,s.jsx)(n.li,{children:"Underlying Facebook Sign-In package error handling."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For details on how to customize the Facebook Sign-In UI in your Flutter app, see the ",(0,s.jsx)(n.a,{href:"./customizing-the-ui",children:"customizing the UI section"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},89345(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/1-use-case-customize-74b4f81d016f74c00ac11ed4a6738656.png"},77300(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/10-settings-5959ad3328c79fe1616877e34b73688d.png"},5634(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/2-permissions-af5f706f6071d63d3d943f54f1e0f68b.png"},16571(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/3-allowed-domains-7c44c210083c30d4fce6701539fe851c.png"},93191(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/4-quickstart-android-dfa8f9253bb13e45a30420ecf86bb3b7.png"},14153(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/5-package-name-4d4b917c0bf0b97d27ff8cc7cdc043a0.png"},70428(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/6-save-key-hashes-9d34d46d81d734678a973f32a6c39d28.png"},52584(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/7-quickstart-ios-567b3f04b0180982c6c2daa0071048c6.png"},49698(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/8-ios-bundle-id-fcea6d4ae441ee7ca9d6c2bfe4758f8f.png"},52119(e,n,i){i.d(n,{A:()=>o});const o=i.p+"assets/images/9-quickstart-web-db008ae915bbfad8fd70887d6e9942a0.png"},28453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var o=i(96540);const s={},r=o.createContext(s);function t(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);