"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[45522],{46844:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"concepts/authentication/providers/github/configuration","title":"Configuration","description":"This page covers configuration options for the GitHub identity provider beyond the basic setup.","source":"@site/docs/06-concepts/11-authentication/04-providers/06-github/02-configuration.md","sourceDirName":"06-concepts/11-authentication/04-providers/06-github","slug":"/concepts/authentication/providers/github/configuration","permalink":"/next/concepts/authentication/providers/github/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/11-authentication/04-providers/06-github/02-configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Setup","permalink":"/next/concepts/authentication/providers/github/setup"},"next":{"title":"Customizing the UI","permalink":"/next/concepts/authentication/providers/github/customizing-the-ui"}}');var o=n(74848),s=n(28453);const r={},c="Configuration",a={},d=[{value:"Configuration options",id:"configuration-options",level:2},{value:"Custom Account Validation",id:"custom-account-validation",level:3},{value:"GitHubAccountDetails",id:"githubaccountdetails",level:3},{value:"Configuring Client IDs on the App",id:"configuring-client-ids-on-the-app",level:3},{value:"Passing Client IDs in Code",id:"passing-client-ids-in-code",level:4},{value:"Using Environment Variables",id:"using-environment-variables",level:4}];function l(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,o.jsx)(i.p,{children:"This page covers configuration options for the GitHub identity provider beyond the basic setup."}),"\n",(0,o.jsx)(i.h2,{id:"configuration-options",children:"Configuration options"}),"\n",(0,o.jsxs)(i.p,{children:["Below is a non-exhaustive list of some of the most common configuration options. For more details on all options, check the ",(0,o.jsx)(i.code,{children:"GitHubIdpConfig"})," in-code documentation."]}),"\n",(0,o.jsx)(i.h3,{id:"custom-account-validation",children:"Custom Account Validation"}),"\n",(0,o.jsx)(i.p,{children:"You can customize the validation for GitHub account details before allowing sign-in. By default, the validation checks that the received account details contain a non-empty userIdentifier."}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-dart",children:"final githubIdpConfig = GitHubIdpConfig(\n  // Optional: Custom validation for GitHub account details\n  githubAccountDetailsValidation: (GitHubAccountDetails accountDetails) {\n    // Throw an exception if account doesn't meet custom requirements\n    if (accountDetails.userIdentifier.isEmpty) {\n      throw GitHubUserInfoMissingDataException();\n    }\n  },\n);\n"})}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsx)(i.p,{children:"GitHub users can keep their email private, so email may be null even for valid accounts. To avoid blocking real users with private profiles from signing in, adjust your validation function with care."})}),"\n",(0,o.jsx)(i.h3,{id:"githubaccountdetails",children:"GitHubAccountDetails"}),"\n",(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.code,{children:"githubAccountDetailsValidation"})," callback receives a ",(0,o.jsx)(i.code,{children:"GitHubAccountDetails"})," record with the following properties:"]}),"\n",(0,o.jsxs)(i.table,{children:[(0,o.jsx)(i.thead,{children:(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.th,{children:"Property"}),(0,o.jsx)(i.th,{children:"Type"}),(0,o.jsx)(i.th,{children:"Description"})]})}),(0,o.jsxs)(i.tbody,{children:[(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"userIdentifier"})}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"String"})}),(0,o.jsx)(i.td,{children:"The GitHub user's unique identifier (UID)"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"email"})}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"String?"})}),(0,o.jsx)(i.td,{children:"The user's email address (may be null if private)"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"name"})}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"String?"})}),(0,o.jsx)(i.td,{children:"The user's display name from GitHub"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"image"})}),(0,o.jsx)(i.td,{children:(0,o.jsx)(i.code,{children:"Uri?"})}),(0,o.jsx)(i.td,{children:"URL to the user's profile image"})]})]})]}),"\n",(0,o.jsx)(i.p,{children:"Example of accessing these properties:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-dart",children:"githubAccountDetailsValidation: (accountDetails) {\n  print('GitHub UID: ${accountDetails.userIdentifier}');\n  print('Email: ${accountDetails.email}');\n  print('Display name: ${accountDetails.name}');\n  print('Profile image: ${accountDetails.image}');\n\n  // Custom validation logic\n  if (accountDetails.email == null) {\n    throw GitHubUserInfoMissingDataException();\n  }\n},\n"})}),"\n",(0,o.jsx)(i.admonition,{type:"info",children:(0,o.jsx)(i.p,{children:"The properties available depend on user privacy settings and granted permissions."})}),"\n",(0,o.jsx)(i.h3,{id:"configuring-client-ids-on-the-app",children:"Configuring Client IDs on the App"}),"\n",(0,o.jsx)(i.h4,{id:"passing-client-ids-in-code",children:"Passing Client IDs in Code"}),"\n",(0,o.jsxs)(i.p,{children:["You can pass the ",(0,o.jsx)(i.code,{children:"clientId"})," and ",(0,o.jsx)(i.code,{children:"redirectUri"})," directly during initialization the GitHub Sign-In service:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-dart",children:"await client.auth.initializeGitHubSignIn(\n  clientId: 'YOUR_GITHUB_CLIENT_ID',\n  redirectUri: 'test-app://github/auth',\n);\n"})}),"\n",(0,o.jsx)(i.p,{children:"This approach is useful when you need different client IDs per platform and want to manage them in your Dart code."}),"\n",(0,o.jsx)(i.h4,{id:"using-environment-variables",children:"Using Environment Variables"}),"\n",(0,o.jsxs)(i.p,{children:["Alternatively, you can pass client IDs during build time using the ",(0,o.jsx)(i.code,{children:"--dart-define"})," option. The GitHub Sign-In provider supports the following environment variables:"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"GITHUB_CLIENT_ID"}),": Your GitHub OAuth client ID."]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"GITHUB_REDIRECT_URI"}),": The callback URI."]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.strong,{children:"Example usage:"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:'flutter run -d <device> \\\n  --dart-define="GITHUB_CLIENT_ID=your_id" \\\n  --dart-define="GITHUB_REDIRECT_URI=test-app://github/auth"\n'})}),"\n",(0,o.jsx)(i.p,{children:"This approach is useful when you need to:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Manage separate client IDs for different platforms (Android, iOS, Web) in a centralized way"}),"\n",(0,o.jsx)(i.li,{children:"Avoid committing client IDs to version control"}),"\n",(0,o.jsx)(i.li,{children:"Configure different credentials for different build environments (development, staging, production)"}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsx)(i.p,{children:"You can also set these environment variables in your IDE's run configuration or CI/CD pipeline to avoid passing them manually each time."})})]})}function u(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>c});var t=n(96540);const o={},s=t.createContext(o);function r(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:i},e.children)}}}]);