"use strict";(globalThis.webpackChunkserverpod_docs=globalThis.webpackChunkserverpod_docs||[]).push([[55711],{51836(e,s,r){r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"concepts/webserver/request-data","title":"Request Data","description":"Once a route matches, you\'ll need to extract data from the request. Relic","source":"@site/versioned_docs/version-3.3.0/06-concepts/18-webserver/03-request-data.md","sourceDirName":"06-concepts/18-webserver","slug":"/concepts/webserver/request-data","permalink":"/concepts/webserver/request-data","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/versioned_docs/version-3.3.0/06-concepts/18-webserver/03-request-data.md","tags":[],"version":"3.3.0","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Routing","permalink":"/concepts/webserver/routing"},"next":{"title":"Middleware","permalink":"/concepts/webserver/middleware"}}');var t=r(74848),a=r(28453);const d={},i="Request Data",o={},c=[{value:"Path parameters",id:"path-parameters",level:2},{value:"Query parameters",id:"query-parameters",level:2},{value:"Headers",id:"headers",level:2},{value:"Body",id:"body",level:2},{value:"Next steps",id:"next-steps",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"request-data",children:"Request Data"})}),"\n",(0,t.jsx)(s.p,{children:"Once a route matches, you'll need to extract data from the request. Relic\nprovides type-safe accessors for path parameters, query parameters, headers,\nand the request body."}),"\n",(0,t.jsx)(s.h2,{id:"path-parameters",children:"Path parameters"}),"\n",(0,t.jsxs)(s.p,{children:["Access path parameters using typed ",(0,t.jsx)(s.code,{children:"PathParam"})," accessors:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"class UserRoute extends Route {\n  static const _idParam = IntPathParam(#id);\n\n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    int userId = request.pathParameters.get(_idParam);\n    final user = await User.db.findById(session, userId);\n\n    if (user == null) {\n      return Response.notFound();\n    }\n\n    return Response.ok(\n      body: Body.fromString(\n        jsonEncode(user.toJson()),\n        mimeType: MimeType.json,\n      ),\n    );\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"IntPathParam"})," combines the symbol (",(0,t.jsx)(s.code,{children:"#id"}),") with a parser, throwing if the\nparameter is missing or not a valid integer. You can also access raw unparsed\nvalues with ",(0,t.jsx)(s.code,{children:"request.pathParameters.raw[#id]"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"query-parameters",children:"Query parameters"}),"\n",(0,t.jsxs)(s.p,{children:["Query parameters (",(0,t.jsx)(s.code,{children:"?key=value"}),") use the same typed accessor pattern:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"class SearchRoute extends Route {\n  static const _pageParam = IntQueryParam('page');\n\n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    int page = request.queryParameters.get(_pageParam); // typed access\n    String? query = request.queryParameters.raw['query']; // raw access\n    // ...\n  }\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"headers",children:"Headers"}),"\n",(0,t.jsxs)(s.p,{children:["Access headers through ",(0,t.jsx)(s.code,{children:"request.headers"})," with type-safe getters for standard\nHTTP headers:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"@override\nFuture<Result> handleCall(Session session, Request request) async {\n  // Type-safe accessors for standard headers\n  final userAgent = request.headers.userAgent;\n  final contentLength = request.headers.contentLength;\n  final auth = request.headers.authorization;\n\n  // Raw access for custom headers\n  final apiKey = request.headers['X-API-Key']?.first;\n\n  // ...\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"body",children:"Body"}),"\n",(0,t.jsx)(s.p,{children:"Read the request body using the appropriate method for your content type:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"@override\nFuture<Result> handleCall(Session session, Request request) async {\n  // Read as string (for JSON, form data, etc.)\n  final body = await request.readAsString();\n  final data = jsonDecode(body);\n\n  // Or read as stream for large uploads\n  final stream = request.read();\n  await for (final chunk in stream) {\n    // Process chunk\n  }\n\n  // ...\n}\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsxs)(s.p,{children:["The body can only be read once. Attempting to read it again will throw a\n",(0,t.jsx)(s.code,{children:"StateError"}),"."]})}),"\n",(0,t.jsxs)(s.p,{children:["For more details on typed parameters and headers, see the\n",(0,t.jsx)(s.a,{href:"https://docs.dartrelic.dev/",children:"Relic documentation"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"middleware",children:"Middleware"})})," - Intercept and transform requests and responses"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"static-files",children:"Static Files"})})," - Serve static assets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"server-side-html",children:"Server-side HTML"})})," - Render HTML dynamically on the server"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453(e,s,r){r.d(s,{R:()=>d,x:()=>i});var n=r(96540);const t={},a=n.createContext(t);function d(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);