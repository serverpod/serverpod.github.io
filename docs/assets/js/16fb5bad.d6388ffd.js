"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[28972],{62230:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>r});const n=JSON.parse('{"id":"concepts/database/models","title":"Models","description":"It\'s possible to map serializable models to tables in your database. To do this, add the table key to your yaml file:","source":"@site/versioned_docs/version-2.9.0/06-concepts/06-database/02-models.md","sourceDirName":"06-concepts/06-database","slug":"/concepts/database/models","permalink":"/concepts/database/models","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/versioned_docs/version-2.9.0/06-concepts/06-database/02-models.md","tags":[],"version":"2.9.0","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Connection","permalink":"/concepts/database/connection"},"next":{"title":"One-to-one","permalink":"/concepts/database/relations/one-to-one"}}');var l=s(74848),d=s(28453);const i={},a="Models",o={},r=[{value:"Non persistent fields",id:"non-persistent-fields",level:3},{value:"Data representation",id:"data-representation",level:3},{value:"Change ID type",id:"change-id-type",level:2},{value:"Declaring a Custom ID Type",id:"declaring-a-custom-id-type",level:3},{value:"Default Uuid model value",id:"default-uuid-model-value",level:4}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"models",children:"Models"})}),"\n",(0,l.jsxs)(t.p,{children:["It's possible to map serializable models to tables in your database. To do this, add the ",(0,l.jsx)(t.code,{children:"table"})," key to your yaml file:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: Company\ntable: company\nfields:\n  name: String\n"})}),"\n",(0,l.jsxs)(t.p,{children:["When the ",(0,l.jsx)(t.code,{children:"table"})," keyword is added to the model, the ",(0,l.jsx)(t.code,{children:"serverpod generate"})," command will generate new methods for ",(0,l.jsx)(t.a,{href:"crud",children:"interacting"})," with the database. The addition of the keyword will also be detected by the ",(0,l.jsx)(t.code,{children:"serverpod create-migration"})," command that will generate the necessary ",(0,l.jsx)(t.a,{href:"migrations",children:"migrations"})," needed to update the database."]}),"\n",(0,l.jsx)(t.admonition,{type:"info",children:(0,l.jsxs)(t.p,{children:["When you add a ",(0,l.jsx)(t.code,{children:"table"})," to a serializable class, Serverpod will automatically add an ",(0,l.jsx)(t.code,{children:"id"})," field of type ",(0,l.jsx)(t.code,{children:"int?"})," to the class. You should not define this field yourself. The ",(0,l.jsx)(t.code,{children:"id"})," is set when you interact with an object stored in the database."]})}),"\n",(0,l.jsx)(t.h3,{id:"non-persistent-fields",children:"Non persistent fields"}),"\n",(0,l.jsxs)(t.p,{children:["You can opt out of creating a column in the database for a specific field by using the ",(0,l.jsx)(t.code,{children:"!persist"})," keyword."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: Company\ntable: company\nfields:\n  name: String, !persist \n"})}),"\n",(0,l.jsxs)(t.p,{children:["All fields are persisted by default and have an implicit ",(0,l.jsx)(t.code,{children:"persist"})," set on each field."]}),"\n",(0,l.jsx)(t.h3,{id:"data-representation",children:"Data representation"}),"\n",(0,l.jsxs)(t.p,{children:["Storing a field with a primitive / core dart type will be handled as its respective type. However, if you use a complex type, such as another model, a ",(0,l.jsx)(t.code,{children:"List"}),", or a ",(0,l.jsx)(t.code,{children:"Map"}),", these will be stored as a ",(0,l.jsx)(t.code,{children:"json"})," object in the database."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: Company\ntable: company\nfields:\n  address: Address # Stored as a json column\n"})}),"\n",(0,l.jsxs)(t.p,{children:["This means that each row has its own copy of the nested object that needs to be updated individually. If you instead want to reference the same object from multiple different tables, you can use the ",(0,l.jsx)(t.code,{children:"relation"})," keyword."]}),"\n",(0,l.jsx)(t.p,{children:"This creates a database relation between two tables and always keeps the data in sync."}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: Company\ntable: company\nfields:\n  address: Address?, relation\n"})}),"\n",(0,l.jsxs)(t.p,{children:["For a complete guide on how to work with relations see the ",(0,l.jsx)(t.a,{href:"relations/one-to-one",children:"relation section"}),"."]}),"\n",(0,l.jsx)(t.h2,{id:"change-id-type",children:"Change ID type"}),"\n",(0,l.jsxs)(t.p,{children:["Changing the type of the ",(0,l.jsx)(t.code,{children:"id"})," field allows you to customize the identifier type for your database tables. This is done by declaring the ",(0,l.jsx)(t.code,{children:"id"})," field on table models with one of the supported types. If the field is omitted, the id field will still be created with type ",(0,l.jsx)(t.code,{children:"int"}),", as have always been."]}),"\n",(0,l.jsxs)(t.p,{children:["The following types are supported for the ",(0,l.jsx)(t.code,{children:"id"})," field:"]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Type"})}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default Persist options"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Default Model options"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"int"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"serial"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"serial (optional)"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"-"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"64-bit serial integer."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"UuidValue"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"random"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"random"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"random"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID v4 value."})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"declaring-a-custom-id-type",children:"Declaring a Custom ID Type"}),"\n",(0,l.jsxs)(t.p,{children:["To declare a custom type for the ",(0,l.jsx)(t.code,{children:"id"})," field in a table model file, use the following syntax:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: UuidIdTable\ntable: uuid_id_table\nfields:\n  id: UuidValue?, defaultPersist=random\n"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: IntIdTable\ntable: int_id_table\nfields:\n  id: int?, defaultPersist=serial  // The default keyword for 'int' is optional.\n"})}),"\n",(0,l.jsx)(t.h4,{id:"default-uuid-model-value",children:"Default Uuid model value"}),"\n",(0,l.jsxs)(t.p,{children:["For UUIDs, it is possible to configure the ",(0,l.jsx)(t.code,{children:"defaultModel"})," value. This will ensure that UUIDs are generated as soon as the object is created, rather than when it is persisted to the database. This is useful for creating objects offline or using them before they are sent to the server."]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-yaml",children:"class: UuidIdTable\ntable: uuid_id_table\nfields:\n  id: UuidValue, defaultModel=random\n"})}),"\n",(0,l.jsxs)(t.p,{children:["When using ",(0,l.jsx)(t.code,{children:"defaultModel=random"}),", the UUID will be generated when the object is created. Since an id is always assigned the ",(0,l.jsx)(t.code,{children:"id"})," field can be non-nullable."]})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>a});var n=s(96540);const l={},d=n.createContext(l);function i(e){const t=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(d.Provider,{value:t},e.children)}}}]);