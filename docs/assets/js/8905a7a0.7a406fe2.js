"use strict";(globalThis.webpackChunkserverpod_docs=globalThis.webpackChunkserverpod_docs||[]).push([[76716],{7502(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"concepts/authentication/providers/custom-providers/oauth2-utility/creating-an-oauth2-based-identity-provider","title":"Creating an OAuth2-based Identity Provider","description":"This page provides a complete, working implementation of a custom OAuth2 provider. The GitHub IDP is built the same way, using the same OAuth2 utility shown here, so this example illustrates the general pattern you can follow when creating your own IDP.","source":"@site/docs/06-concepts/11-authentication/04-providers/10-custom-providers/02-oauth2-utility/02-creating-an-oauth2-based-identity-provider.md","sourceDirName":"06-concepts/11-authentication/04-providers/10-custom-providers/02-oauth2-utility","slug":"/concepts/authentication/providers/custom-providers/oauth2-utility/creating-an-oauth2-based-identity-provider","permalink":"/next/concepts/authentication/providers/custom-providers/oauth2-utility/creating-an-oauth2-based-identity-provider","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/11-authentication/04-providers/10-custom-providers/02-oauth2-utility/02-creating-an-oauth2-based-identity-provider.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Setup","permalink":"/next/concepts/authentication/providers/custom-providers/oauth2-utility/setup"},"next":{"title":"Managing tokens","permalink":"/next/concepts/authentication/token-managers/managing-tokens"}}');var i=t(74848),o=t(28453);const a={},s="Creating an OAuth2-based Identity Provider",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Server-Side Implementation",id:"server-side-implementation",level:2},{value:"1. Data Model",id:"1-data-model",level:3},{value:"2. Configuration",id:"2-configuration",level:3},{value:"3. Provider Class",id:"3-provider-class",level:3},{value:"4. Endpoint",id:"4-endpoint",level:3},{value:"5. Server Registration",id:"5-server-registration",level:3},{value:"Client-Side Implementation",id:"client-side-implementation",level:2},{value:"1. Configuration",id:"1-configuration",level:3},{value:"2. Service",id:"2-service",level:3},{value:"3. Controller",id:"3-controller",level:3},{value:"4. UI Widget",id:"4-ui-widget",level:3},{value:"5. Initialization",id:"5-initialization",level:3},{value:"6. Usage in UI",id:"6-usage-in-ui",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"creating-an-oauth2-based-identity-provider",children:"Creating an OAuth2-based Identity Provider"})}),"\n",(0,i.jsxs)(n.p,{children:["This page provides a complete, working implementation of a custom OAuth2 provider. The ",(0,i.jsx)(n.a,{href:"../../github/setup",children:"GitHub IDP"})," is built the same way, using the same OAuth2 utility shown here, so this example illustrates the general pattern you can follow when creating your own IDP."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:'This example implements authentication with a fictional OAuth2 provider called "MyProvider". The implementation includes:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Server-side token exchange and user management"}),"\n",(0,i.jsx)(n.li,{children:"Client-side authorization flow"}),"\n",(0,i.jsx)(n.li,{children:"Flutter UI integration"}),"\n",(0,i.jsx)(n.li,{children:"Error handling"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"server-side-implementation",children:"Server-Side Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"1-data-model",children:"1. Data Model"}),"\n",(0,i.jsx)(n.p,{children:"First, create a data model to store provider accounts:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"class: MyProviderAccount\nserverOnly: true\ntable: my_provider_account\nfields:\n  id: UuidValue?, defaultPersist=random_v7\n\n  # The AuthUser this account belongs to\n  authUser: module:serverpod_auth_core:AuthUser?, relation(onDelete=Cascade)\n\n  # Provider's user identifier\n  providerId: String\n\n  # User's email from provider (optional)\n  email: String?\n\n  # Creation timestamp\n  created: DateTime, defaultModel=now\n\nindexes:\n  my_provider_account_provider_id:\n    fields: providerId\n    unique: true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-configuration",children:"2. Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Create the server configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_server/core.dart';\nimport 'my_provider_idp.dart';\n\nclass MyProviderIdpConfig extends IdentityProviderBuilder<MyProviderIdp> {\n  final String clientId;\n  final String clientSecret;\n  late final OAuth2PkceServerConfig oauth2Config;\n\n  MyProviderIdpConfig({\n    required this.clientId,\n    required this.clientSecret,\n  }) : oauth2Config = OAuth2PkceServerConfig(\n          tokenEndpointUrl: Uri.https('oauth.myprovider.com', '/oauth/token'),\n          clientId: clientId,\n          clientSecret: clientSecret,\n          credentialsLocation: OAuth2CredentialsLocation.header,\n          parseTokenResponse: parseTokenResponse,\n        );\n\n  static OAuth2PkceTokenResponse parseTokenResponse(Map<String, dynamic> response) {\n    final error = response['error'] as String?;\n    if (error != null) {\n      final description = response['error_description'] as String?;\n      throw OAuth2InvalidResponseException(\n        'Provider error: $error${description != null ? ' - $description' : ''}',\n      );\n    }\n    final token = response['access_token'] as String?;\n    if (token == null) {\n      throw const OAuth2MissingAccessTokenException('No access token in response');\n    }\n    return OAuth2PkceTokenResponse(accessToken: token);\n  }\n\n  @override\n  MyProviderIdp build({\n    required TokenManager tokenManager,\n    required AuthUsers authUsers,\n    required UserProfiles userProfiles,\n  }) {\n    return MyProviderIdp(\n      config: this,\n      tokenIssuer: tokenManager,\n      authUsers: authUsers,\n      userProfiles: userProfiles,\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-provider-class",children:"3. Provider Class"}),"\n",(0,i.jsx)(n.p,{children:"Create the main identity provider class:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'dart:convert';\n\nimport 'package:http/http.dart' as http;\nimport 'package:serverpod/serverpod.dart';\nimport 'package:serverpod_auth_idp_server/core.dart';\n\nimport '../generated/protocol.dart';\nimport 'my_provider_idp_config.dart';\n\nclass MyProviderIdp {\n  static const String method = 'myprovider';\n\n  final MyProviderIdpConfig config;\n  final TokenIssuer _tokenIssuer;\n  final AuthUsers _authUsers;\n  final UserProfiles _userProfiles;\n\n  late final OAuth2PkceUtil _oauth2Util;\n\n  MyProviderIdp({\n    required this.config,\n    required TokenIssuer tokenIssuer,\n    required AuthUsers authUsers,\n    required UserProfiles userProfiles,\n  })  : _tokenIssuer = tokenIssuer,\n        _authUsers = authUsers,\n        _userProfiles = userProfiles {\n    _oauth2Util = OAuth2PkceUtil(config: config.oauth2Config);\n  }\n\n  Future<AuthSuccess> login(\n    Session session, {\n    required String code,\n    required String codeVerifier,\n    required String redirectUri,\n  }) async {\n    return await DatabaseUtil.runInTransactionOrSavepoint(\n      session.db,\n      null,\n      (transaction) async {\n        // 1. Exchange authorization code for token response\n        final tokenResponse = await _oauth2Util.exchangeCodeForToken(\n          code: code,\n          codeVerifier: codeVerifier,\n          redirectUri: redirectUri,\n        );\n\n        // 2. Fetch user information\n        final userInfo = await _fetchUserInfo(session, tokenResponse.accessToken);\n\n        // 3. Authenticate (find or create user)\n        final account = await _authenticate(session, userInfo, transaction);\n\n        // 4. Create user profile if new user\n        if (account.newAccount) {\n          await _createUserProfile(\n            session,\n            account.authUserId,\n            userInfo,\n            transaction,\n          );\n        }\n\n        // 5. Issue authentication token\n        return await _tokenIssuer.issueToken(\n          session,\n          authUserId: account.authUserId,\n          transaction: transaction,\n          method: method,\n          scopes: account.scopes,\n        );\n      },\n    );\n  }\n\n  Future<Map<String, dynamic>> _fetchUserInfo(\n    Session session,\n    String accessToken,\n  ) async {\n    final response = await http.get(\n      Uri.https('api.myprovider.com', '/v1/user'),\n      headers: {\n        'Authorization': 'Bearer $accessToken',\n        'Accept': 'application/json',\n      },\n    );\n\n    if (response.statusCode != 200) {\n      session.log(\n        'Failed to fetch user info: ${response.statusCode}',\n        level: LogLevel.error,\n      );\n      throw MyProviderAuthException('Failed to fetch user information');\n    }\n\n    try {\n      return jsonDecode(response.body) as Map<String, dynamic>;\n    } catch (e) {\n      session.log(\n        'Failed to parse user info: $e',\n        level: LogLevel.error,\n      );\n      throw MyProviderAuthException('Invalid user information format');\n    }\n  }\n\n  Future<_AccountResult> _authenticate(\n    Session session,\n    Map<String, dynamic> userInfo,\n    Transaction transaction,\n  ) async {\n    final providerId = userInfo['id']?.toString();\n    if (providerId == null || providerId.isEmpty) {\n      throw MyProviderAuthException('Missing user ID from provider');\n    }\n\n    // Check if account exists\n    var account = await MyProviderAccount.db.findFirstRow(\n      session,\n      where: (t) => t.providerId.equals(providerId),\n      transaction: transaction,\n    );\n\n    final isNewAccount = account == null;\n\n    if (isNewAccount) {\n      // Create new auth user\n      final authUser = await _authUsers.create(\n        session,\n        transaction: transaction,\n      );\n\n      // Create provider account\n      account = await MyProviderAccount.db.insertRow(\n        session,\n        MyProviderAccount(\n          providerId: providerId,\n          email: userInfo['email'] as String?,\n          authUserId: authUser.id,\n        ),\n        transaction: transaction,\n      );\n\n      return (\n        authUserId: authUser.id,\n        newAccount: true,\n        scopes: authUser.scopes,\n      );\n    } else {\n      // Get existing user\n      final authUser = await _authUsers.get(\n        session,\n        authUserId: account.authUserId,\n        transaction: transaction,\n      );\n\n      return (\n        authUserId: authUser.id,\n        newAccount: false,\n        scopes: authUser.scopes,\n      );\n    }\n  }\n\n  Future<void> _createUserProfile(\n    Session session,\n    UuidValue authUserId,\n    Map<String, dynamic> userInfo,\n    Transaction transaction,\n  ) async {\n    try {\n      await _userProfiles.createUserProfile(\n        session,\n        authUserId,\n        UserProfileData(\n          fullName: userInfo['name'] as String?,\n          email: userInfo['email'] as String?,\n        ),\n        transaction: transaction,\n      );\n    } catch (e, stackTrace) {\n      session.log(\n        'Failed to create user profile',\n        level: LogLevel.error,\n        exception: e,\n        stackTrace: stackTrace,\n      );\n      // Don't fail the authentication if profile creation fails\n    }\n  }\n}\n\ntypedef _AccountResult = ({\n  UuidValue authUserId,\n  bool newAccount,\n  Set<Scope> scopes,\n});\n\nclass MyProviderAuthException implements Exception {\n  final String message;\n  const MyProviderAuthException(this.message);\n\n  @override\n  String toString() => 'MyProviderAuthException: $message';\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-endpoint",children:"4. Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Create the endpoint:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod/serverpod.dart';\nimport 'package:serverpod_auth_idp_server/core.dart';\n\nimport 'my_provider_idp.dart';\n\nclass MyProviderIdpEndpoint extends Endpoint {\n  MyProviderIdp get myProviderIdp =>\n      AuthServices.getIdentityProvider<MyProviderIdp>();\n\n  Future<AuthSuccess> login(\n    Session session, {\n    required String code,\n    required String codeVerifier,\n    required String redirectUri,\n  }) async {\n    try {\n      return await myProviderIdp.login(\n        session,\n        code: code,\n        codeVerifier: codeVerifier,\n        redirectUri: redirectUri,\n      );\n    } on OAuth2Exception catch (e) {\n      session.log(\n        'OAuth2 error during authentication: ${e.message}',\n        level: LogLevel.error,\n      );\n      throw Exception('Authentication failed');\n    } on MyProviderAuthException catch (e) {\n      session.log(\n        'MyProvider error: ${e.message}',\n        level: LogLevel.error,\n      );\n      throw Exception('Authentication failed');\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-server-registration",children:"5. Server Registration"}),"\n",(0,i.jsxs)(n.p,{children:["Register the provider in ",(0,i.jsx)(n.code,{children:"server.dart"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod/serverpod.dart';\nimport 'package:serverpod_auth_idp_server/core.dart';\n\nimport 'my_provider_idp_config.dart';\n\nvoid run(List<String> args) async {\n  final pod = Serverpod(\n    args,\n    Protocol(),\n    Endpoints(),\n  );\n\n  final myProviderConfig = MyProviderIdpConfig(\n    clientId: pod.getPassword('myProviderClientId')!,\n    clientSecret: pod.getPassword('myProviderClientSecret')!,\n  );\n\n  pod.initializeAuthServices(\n    tokenManagerBuilders: [\n      JwtConfigFromPasswords(),\n    ],\n    identityProviderBuilders: [\n      myProviderConfig,\n    ],\n  );\n\n  await pod.start();\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"client-side-implementation",children:"Client-Side Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"1-configuration",children:"1. Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Create the client configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/foundation.dart';\nimport 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\n\nclass MyProviderConfig {\n  static const _clientIdEnvKey = 'MY_PROVIDER_CLIENT_ID';\n  static const _redirectUriEnvKey = 'MY_PROVIDER_REDIRECT_URI';\n\n  static OAuth2PkceProviderClientConfig get clientConfig {\n    // Get credentials from environment or use defaults\n    final clientId = _getClientId();\n    final redirectUri = _getRedirectUri();\n\n    return OAuth2PkceProviderClientConfig(\n      authorizationEndpoint: Uri.https('oauth.myprovider.com', '/oauth/authorize'),\n      clientId: clientId,\n      redirectUri: redirectUri,\n      callbackUrlScheme: Uri.parse(redirectUri).scheme,\n      defaultScopes: ['profile', 'email'],\n    );\n  }\n\n  static String _getClientId() {\n    const clientId = String.fromEnvironment(_clientIdEnvKey);\n    if (clientId.isNotEmpty) return clientId;\n\n    // Development fallback\n    if (kDebugMode) {\n      return 'dev-client-id';\n    }\n\n    throw Exception('$_clientIdEnvKey not configured');\n  }\n\n  static String _getRedirectUri() {\n    const redirectUri = String.fromEnvironment(_redirectUriEnvKey);\n    if (redirectUri.isNotEmpty) return redirectUri;\n\n    // Platform-specific defaults for development\n    if (kDebugMode) {\n      if (kIsWeb) {\n        return 'http://localhost:3000/auth.html';\n      } else {\n        return 'myapp://auth-callback';\n      }\n    }\n\n    throw Exception('$_redirectUriEnvKey not configured');\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-service",children:"2. Service"}),"\n",(0,i.jsx)(n.p,{children:"Create the sign-in service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\n\nimport 'my_provider_config.dart';\n\nclass MyProviderService {\n  static final instance = MyProviderService._();\n  MyProviderService._();\n\n  OAuth2PkceUtil? _oauth2Util;\n\n  void initialize() {\n    if (_oauth2Util != null) return;\n\n    _oauth2Util = OAuth2PkceUtil(\n      config: MyProviderConfig.clientConfig,\n    );\n  }\n\n  Future<OAuth2PkceResult> signIn({List<String>? scopes}) async {\n    if (_oauth2Util == null) {\n      throw StateError(\n        'MyProviderService not initialized. Call initialize() first.',\n      );\n    }\n\n    return await _oauth2Util!.authorize(scopes: scopes);\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-controller",children:"3. Controller"}),"\n",(0,i.jsx)(n.p,{children:"Create an authentication controller:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/foundation.dart';\nimport 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\nimport 'package:your_client/your_client.dart';\n\nimport 'my_provider_config.dart';\nimport 'my_provider_service.dart';\n\nenum MyProviderAuthState {\n  idle,\n  loading,\n  authenticated,\n  error,\n}\n\nclass MyProviderAuthController extends ChangeNotifier {\n  final Client client;\n  final VoidCallback? onAuthenticated;\n  final Function(Object error)? onError;\n\n  MyProviderAuthController({\n    required this.client,\n    this.onAuthenticated,\n    this.onError,\n  });\n\n  MyProviderAuthState _state = MyProviderAuthState.idle;\n  Object? _error;\n\n  MyProviderAuthState get state => _state;\n  bool get isLoading => _state == MyProviderAuthState.loading;\n  bool get isAuthenticated => client.auth.isAuthenticated;\n  String? get errorMessage => _error?.toString();\n\n  Future<void> signIn() async {\n    if (_state == MyProviderAuthState.loading) return;\n\n    _setState(MyProviderAuthState.loading);\n\n    try {\n      // Get authorization code from provider\n      final result = await MyProviderService.instance.signIn();\n\n      // Exchange for tokens on backend\n      final endpoint = client.getEndpointOfType<MyProviderIdpEndpoint>();\n      await endpoint.login(\n        code: result.code,\n        codeVerifier: result.codeVerifier!,\n        redirectUri: MyProviderConfig.clientConfig.redirectUri,\n      );\n\n      _setState(MyProviderAuthState.authenticated);\n      onAuthenticated?.call();\n    } on OAuth2PkceUserCancelledException {\n      // User cancelled - just reset to idle\n      _setState(MyProviderAuthState.idle);\n    } catch (error) {\n      _error = error;\n      _setState(MyProviderAuthState.error);\n      onError?.call(error);\n    }\n  }\n\n  void _setState(MyProviderAuthState newState) {\n    if (newState != MyProviderAuthState.error) {\n      _error = null;\n    }\n    _state = newState;\n    notifyListeners();\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-ui-widget",children:"4. UI Widget"}),"\n",(0,i.jsx)(n.p,{children:"Create the sign-in button:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:your_client/your_client.dart';\n\nimport 'my_provider_auth_controller.dart';\n\nclass MyProviderSignInWidget extends StatefulWidget {\n  final Client client;\n  final VoidCallback? onAuthenticated;\n  final Function(Object error)? onError;\n\n  const MyProviderSignInWidget({\n    required this.client,\n    this.onAuthenticated,\n    this.onError,\n    super.key,\n  });\n\n  @override\n  State<MyProviderSignInWidget> createState() => _MyProviderSignInWidgetState();\n}\n\nclass _MyProviderSignInWidgetState extends State<MyProviderSignInWidget> {\n  late final MyProviderAuthController _controller;\n\n  @override\n  void initState() {\n    super.initState();\n    _controller = MyProviderAuthController(\n      client: widget.client,\n      onAuthenticated: widget.onAuthenticated,\n      onError: widget.onError,\n    );\n    _controller.addListener(_onControllerStateChanged);\n  }\n\n  @override\n  void dispose() {\n    _controller.removeListener(_onControllerStateChanged);\n    _controller.dispose();\n    super.dispose();\n  }\n\n  void _onControllerStateChanged() => setState(() {});\n\n  @override\n  Widget build(BuildContext context) {\n    return ElevatedButton(\n      onPressed: _controller.isLoading ? null : _controller.signIn,\n      style: ElevatedButton.styleFrom(\n        minimumSize: const Size(240, 48),\n      ),\n      child: _controller.isLoading\n          ? const SizedBox(\n              width: 20,\n              height: 20,\n              child: CircularProgressIndicator(strokeWidth: 2),\n            )\n          : const Text('Sign in with MyProvider'),\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-initialization",children:"5. Initialization"}),"\n",(0,i.jsx)(n.p,{children:"Initialize in your app:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\nimport 'package:serverpod_flutter/serverpod_flutter.dart';\nimport 'package:your_client/your_client.dart';\n\nimport 'my_provider_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n\n  // Initialize Serverpod client\n  final client = Client('http://localhost:8080/')\n    ..connectivityMonitor = FlutterConnectivityMonitor()\n    ..authSessionManager = FlutterAuthSessionManager();\n\n  await client.auth.initialize();\n\n  // Initialize MyProvider service\n  MyProviderService.instance.initialize();\n\n  runApp(MyApp(client: client));\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-usage-in-ui",children:"6. Usage in UI"}),"\n",(0,i.jsx)(n.p,{children:"Use the widget in your sign-in page:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:your_client/your_client.dart';\n\nimport 'my_provider_sign_in_widget.dart';\n\nclass SignInPage extends StatelessWidget {\n  final Client client;\n\n  const SignInPage({required this.client, super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(title: const Text('Sign In')),\n      body: Center(\n        child: MyProviderSignInWidget(\n          client: client,\n          onAuthenticated: () {\n            // Navigate to home page after authentication\n            Navigator.of(context).pushReplacement(\n              MaterialPageRoute(\n                builder: (_) => HomePage(client: client),\n              ),\n            );\n          },\n          onError: (error) {\n            // Show error message\n            ScaffoldMessenger.of(context).showSnackBar(\n              SnackBar(\n                content: Text('Sign in failed: $error'),\n                backgroundColor: Colors.red,\n              ),\n            );\n          },\n        ),\n      ),\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This compact example provides a clear template you can adapt to integrate any OAuth2 provider into your Serverpod project. Use this as a template for implementing your own OAuth2 provider integration."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453(e,n,t){t.d(n,{R:()=>a,x:()=>s});var r=t(96540);const i={},o=r.createContext(i);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);