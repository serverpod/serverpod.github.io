"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[39126],{78974:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"concepts/webserver/overview","title":"Overview","description":"In addition to the application server, Serverpod comes with a built-in web server. The web server allows you to access your database and business layer the same way you would from a method call from an app. This makes it simple to share data for applications that need both an app and traditional web pages. You can also use the web server to create webhooks or define custom REST APIs to communicate with third-party services.","source":"@site/docs/06-concepts/18-webserver/01-overview.md","sourceDirName":"06-concepts/18-webserver","slug":"/concepts/webserver/overview","permalink":"/next/concepts/webserver/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/18-webserver/01-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Backward compatibility","permalink":"/next/concepts/backward-compatibility"},"next":{"title":"Routing","permalink":"/next/concepts/webserver/routing"}}');var t=r(74848),o=r(28453);const a={},i="Overview",d={},c=[{value:"Your first route",id:"your-first-route",level:2},{value:"Core concepts",id:"core-concepts",level:2},{value:"Routes and handlers",id:"routes-and-handlers",level:3},{value:"Response types",id:"response-types",level:3},{value:"Adding routes",id:"adding-routes",level:3},{value:"When to use what",id:"when-to-use-what",level:2},{value:"Rest apis \u2192 custom routes",id:"rest-apis--custom-routes",level:3},{value:"Static files \u2192 <code>StaticRoute</code>",id:"static-files--staticroute",level:3},{value:"Database access",id:"database-access",level:2},{value:"Next steps",id:"next-steps",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"overview",children:"Overview"})}),"\n",(0,t.jsx)(s.p,{children:"In addition to the application server, Serverpod comes with a built-in web server. The web server allows you to access your database and business layer the same way you would from a method call from an app. This makes it simple to share data for applications that need both an app and traditional web pages. You can also use the web server to create webhooks or define custom REST APIs to communicate with third-party services."}),"\n",(0,t.jsxs)(s.p,{children:["Serverpod's web server is built on the ",(0,t.jsx)(s.a,{href:"https://github.com/serverpod/relic",children:"Relic"})," framework, giving you access to its routing engine, middleware system, and typed headers. This means you get the benefits of Serverpod's database integration and business logic alongside Relic's web server capabilities."]}),"\n",(0,t.jsx)(s.h2,{id:"your-first-route",children:"Your first route"}),"\n",(0,t.jsx)(s.p,{children:"When you create a new Serverpod project, it sets up a web server by default. Here's how to add a simple API endpoint:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"import 'package:serverpod/serverpod.dart';\n\nclass HelloRoute extends Route {\n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    return Response.ok(\n      body: Body.fromString(\n        jsonEncode({'message': 'Hello from Serverpod!'}),\n        mimeType: MimeType.json,\n      ),\n    );\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Register the route in your ",(0,t.jsx)(s.code,{children:"server.dart"})," file before starting the server:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"pod.webServer.addRoute(HelloRoute(), '/api/hello');\nawait pod.start();\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Visit ",(0,t.jsx)(s.code,{children:"http://localhost:8080/api/hello"})," to see your API response."]}),"\n",(0,t.jsx)(s.h2,{id:"core-concepts",children:"Core concepts"}),"\n",(0,t.jsx)(s.h3,{id:"routes-and-handlers",children:"Routes and handlers"}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"Route"})," is a destination in your web server that handles requests and generates responses. Routes extend the ",(0,t.jsx)(s.code,{children:"Route"})," base class and implement the ",(0,t.jsx)(s.code,{children:"handleCall()"})," method:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"class ApiRoute extends Route {\n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    // Your logic here\n    return Response.ok();\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"handleCall()"})," method receives:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Session"})," - Access to your database, logging, and authenticated user"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Request"})," - The HTTP request with headers, body, and URL information"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"response-types",children:"Response types"}),"\n",(0,t.jsx)(s.p,{children:"Return different response types based on your needs:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"// Success responses\nreturn Response.ok(body: Body.fromString('Success'));\nreturn Response.created(body: Body.fromString('Created'));\nreturn Response.noContent();\n\n// Error responses\nreturn Response.badRequest(body: Body.fromString('Invalid input'));\nreturn Response.unauthorized(body: Body.fromString('Not authenticated'));\nreturn Response.notFound(body: Body.fromString('Not found'));\nreturn Response.internalServerError(body: Body.fromString('Server error'));\n"})}),"\n",(0,t.jsx)(s.h3,{id:"adding-routes",children:"Adding routes"}),"\n",(0,t.jsx)(s.p,{children:"Routes are added with a path pattern:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"// Exact path\npod.webServer.addRoute(UserRoute(), '/api/users');\n\n// Path with wildcard\npod.webServer.addRoute(StaticRoute.directory(Directory('web')), '/static/**');\n"})}),"\n",(0,t.jsx)(s.p,{children:"Routes are matched in the order they were added."}),"\n",(0,t.jsx)(s.h2,{id:"when-to-use-what",children:"When to use what"}),"\n",(0,t.jsx)(s.h3,{id:"rest-apis--custom-routes",children:"Rest apis \u2192 custom routes"}),"\n",(0,t.jsxs)(s.p,{children:["For REST APIs, webhooks, or custom HTTP handlers, use custom ",(0,t.jsx)(s.code,{children:"Route"})," classes:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"class UsersApiRoute extends Route {\n  UsersApiRoute() : super(methods: {Method.get, Method.post});\n  \n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    if (request.method == Method.get) {\n      // List users\n    } else {\n      // Create user\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.p,{children:["See ",(0,t.jsx)(s.a,{href:"routing",children:"Routing"})," for details."]}),"\n",(0,t.jsxs)(s.h3,{id:"static-files--staticroute",children:["Static files \u2192 ",(0,t.jsx)(s.code,{children:"StaticRoute"})]}),"\n",(0,t.jsx)(s.p,{children:"For serving CSS, JavaScript, images, or other static assets:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"pod.webServer.addRoute(\n  StaticRoute.directory(Directory('web/static')),\n  '/static/**',\n);\n"})}),"\n",(0,t.jsxs)(s.p,{children:["See ",(0,t.jsx)(s.a,{href:"static-files",children:"Static Files"})," for cache-busting and optimization."]}),"\n",(0,t.jsx)(s.h2,{id:"database-access",children:"Database access"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"Session"})," parameter gives you full access to your Serverpod database:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-dart",children:"class UserRoute extends Route {\n  @override\n  Future<Result> handleCall(Session session, Request request) async {\n    // Query database\n    final users = await User.db.find(session);\n    \n    // Use logging\n    session.log('Retrieved ${users.length} users');\n    \n    return Response.ok(\n      body: Body.fromString(\n        jsonEncode(users.map((u) => u.toJson()).toList()),\n        mimeType: MimeType.json,\n      ),\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"routing",children:"Routing"})})," - Match requests to handlers by method and URL pattern"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"request-data",children:"Request Data"})})," - Access path parameters, query parameters, headers, and body"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"middleware",children:"Middleware"})})," - Intercept and transform requests and responses"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"static-files",children:"Static Files"})})," - Serve static assets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"server-side-html",children:"Server-side HTML"})})," - Render HTML dynamically on the server"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>i});var n=r(96540);const t={},o=n.createContext(t);function a(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);