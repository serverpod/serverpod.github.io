"use strict";(self.webpackChunkserverpod_docs=self.webpackChunkserverpod_docs||[]).push([[73851],{36425:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"concepts/authentication/providers/github/setup","title":"Setup","description":"To set up Sign in with GitHub, you must create OAuth2 credentials on GitHub and configure your Serverpod application accordingly.","source":"@site/docs/06-concepts/11-authentication/04-providers/06-github/01-setup.md","sourceDirName":"06-concepts/11-authentication/04-providers/06-github","slug":"/concepts/authentication/providers/github/setup","permalink":"/next/concepts/authentication/providers/github/setup","draft":false,"unlisted":false,"editUrl":"https://github.com/serverpod/serverpod_docs/tree/main/docs/06-concepts/11-authentication/04-providers/06-github/01-setup.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Admin Operations","permalink":"/next/concepts/authentication/providers/firebase/admin-operations"},"next":{"title":"Configuration","permalink":"/next/concepts/authentication/providers/github/configuration"}}');var r=i(74848),s=i(28453);const o={},a="Setup",d={},c=[{value:"Choosing Your GitHub App Type",id:"choosing-your-github-app-type",level:2},{value:"Create your credentials",id:"create-your-credentials",level:2},{value:"Server-side Configuration",id:"server-side-configuration",level:2},{value:"Store the Credentials",id:"store-the-credentials",level:3},{value:"Configure the GitHub Identity Provider",id:"configure-the-github-identity-provider",level:3},{value:"Expose the Endpoint",id:"expose-the-endpoint",level:3},{value:"Generate and Migrate",id:"generate-and-migrate",level:3},{value:"Basic configuration options",id:"basic-configuration-options",level:3},{value:"Client-side configuration",id:"client-side-configuration",level:2},{value:"iOS and MacOS",id:"ios-and-macos",level:3},{value:"Android",id:"android",level:3},{value:"Web",id:"web",level:3},{value:"Present the authentication UI",id:"present-the-authentication-ui",level:2},{value:"Initializing the <code>GitHubSignInService</code>",id:"initializing-the-githubsigninservice",level:3},{value:"Using GitHubSignInWidget",id:"using-githubsigninwidget",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"setup",children:"Setup"})}),"\n",(0,r.jsxs)(n.p,{children:["To set up ",(0,r.jsx)(n.strong,{children:"Sign in with GitHub"}),", you must create OAuth2 credentials on ",(0,r.jsx)(n.a,{href:"https://github.com/settings/apps",children:"GitHub"})," and configure your Serverpod application accordingly."]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["You need to install the auth module before you continue, see ",(0,r.jsx)(n.a,{href:"../../setup",children:"Setup"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"choosing-your-github-app-type",children:"Choosing Your GitHub App Type"}),"\n",(0,r.jsx)(n.p,{children:"GitHub offers two ways to obtain OAuth2 credentials:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GitHub Apps"}),": more suitable when building integrations or bots that belong to an organization or repository, operate with their own identity, continue functioning regardless of which users come and go, and only access the repositories and permissions explicitly granted. They provide fine\u2011grained control, short\u2011lived tokens, and are the modern, secure choice for most automation and service scenarios."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OAuth Apps"}),': preferred when the primary need is authenticating users with "Sign in with GitHub" or performing actions strictly as the currently logged\u2011in user under broad OAuth scopes. Similar to other OAuth providers like Google or Apple, they allow access to a user\u2019s GitHub resources within the scopes granted, but lack the flexibility and security of GitHub Apps.']}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/settings/apps",children:"GitHub Apps"})," are the preferred choice for most scenarios \u2014 especially mobile and modern integrations.\nSee the official comparison here: ",(0,r.jsx)(n.a,{href:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps",children:"Differences between GitHub Apps and OAuth Apps"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"create-your-credentials",children:"Create your credentials"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://github.com/settings/apps",children:"GitHub Developer Settings"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"New GitHub App"})," (recommended) or ",(0,r.jsx)(n.strong,{children:"New OAuth App"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"GitHub App Setup",src:i(21943).A+"",width:"1309",height:"1690"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Fill in the required fields:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"App name"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Homepage URL"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Callback URL(s)"})," (use your app's redirect URI, e.g., ",(0,r.jsx)(n.code,{children:"myapp://auth"})," for mobile)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Permissions"})," (at minimum: account permission = profile; add others as needed)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webhook URL"})," (disable if not required; serves to receive events like commits, pull requests, and repo changes)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"GitHub App Setup",src:i(14312).A+"",width:"1078",height:"534"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"GitHub App Setup",src:i(49339).A+"",width:"1085",height:"317"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Webhooks let your GitHub App automatically receive notifications about repository activity.\nIf your app doesn\u2019t need to react to events (like commits or pull requests), it\u2019s best to disable the webhook URL to reduce unnecessary traffic and complexity."})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create GitHub App"})," (for GitHub Apps) or ",(0,r.jsx)(n.strong,{children:"Register application"})," (for OAuth Apps). This will save your app and generate the ",(0,r.jsx)(n.strong,{children:"Client ID"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["After the app is created, click ",(0,r.jsx)(n.strong,{children:"Generate a new client secret"})," to obtain the ",(0,r.jsx)(n.strong,{children:"Client Secret"}),". Copy both the ",(0,r.jsx)(n.strong,{children:"Client ID"})," and ",(0,r.jsx)(n.strong,{children:"Client Secret"})," for later use."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"GitHub App Setup",src:i(61464).A+"",width:"1046",height:"708"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"server-side-configuration",children:"Server-side Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"store-the-credentials",children:"Store the Credentials"}),"\n",(0,r.jsxs)(n.p,{children:["This can be done by adding your credentials to the ",(0,r.jsx)(n.code,{children:"githubClientId"})," and ",(0,r.jsx)(n.code,{children:"githubClientSecret"})," keys in the ",(0,r.jsx)(n.code,{children:"config/passwords.yaml"})," file, or by setting them as the values of the ",(0,r.jsx)(n.code,{children:"SERVERPOD_PASSWORD_githubClientId"})," and ",(0,r.jsx)(n.code,{children:"SERVERPOD_PASSWORD_githubClientSecret"})," environment variables."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"development:\n  githubClientId: 'YOUR_GITHUB_CLIENT_ID'\n  githubClientSecret: 'YOUR_GITHUB_CLIENT_SECRET'\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Keep your Client Secret confidential. Never commit this value to version control. Store it securely using environment variables or secret management."})}),"\n",(0,r.jsx)(n.h3,{id:"configure-the-github-identity-provider",children:"Configure the GitHub Identity Provider"}),"\n",(0,r.jsxs)(n.p,{children:["In your main ",(0,r.jsx)(n.code,{children:"server.dart"})," file, configure the GitHub identity provider:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod/serverpod.dart';\nimport 'package:serverpod_auth_idp_server/core.dart';\nimport 'package:serverpod_auth_idp_server/providers/github.dart';\n\nvoid run(List<String> args) async {\n  final pod = Serverpod(\n    args,\n    Protocol(),\n    Endpoints(),\n  );\n\n  pod.initializeAuthServices(\n    tokenManagerBuilders: [\n      JwtConfigFromPasswords(),\n    ],\n    identityProviderBuilders: [\n      GitHubIdpConfig(\n        clientId: pod.getPassword('githubClientId')!,\n        clientSecret: pod.getPassword('githubClientSecret')!,\n      ),\n    ],\n  );\n\n  await pod.start();\n}\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["You can use ",(0,r.jsx)(n.code,{children:"GitHubIdpConfigFromPasswords()"})," to automatically load credentials from ",(0,r.jsx)(n.code,{children:"config/passwords.yaml"})," or the ",(0,r.jsx)(n.code,{children:"SERVERPOD_PASSWORD_githubClientId"})," and ",(0,r.jsx)(n.code,{children:"SERVERPOD_PASSWORD_githubClientSecret"})," environment variables:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"identityProviderBuilders: [\n  GitHubIdpConfigFromPasswords(),\n],\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"expose-the-endpoint",children:"Expose the Endpoint"}),"\n",(0,r.jsxs)(n.p,{children:["Create an endpoint that extends ",(0,r.jsx)(n.code,{children:"GitHubIdpBaseEndpoint"})," to expose the GitHub authentication API:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_server/providers/github.dart';\n\nclass GitHubIdpEndpoint extends GitHubIdpBaseEndpoint {}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generate-and-migrate",children:"Generate and Migrate"}),"\n",(0,r.jsxs)(n.p,{children:["Finally, run ",(0,r.jsx)(n.code,{children:"serverpod generate"})," to generate the client code and create a migration to initialize the database for the provider. More detailed instructions can be found in the general ",(0,r.jsx)(n.a,{href:"../../setup#identity-providers-configuration",children:"identity providers setup section"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"basic-configuration-options",children:"Basic configuration options"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clientId"}),": Required. The Client ID of your GitHub App or OAuth App."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clientSecret"}),": Required. The Client Secret generated for your GitHub App or OAuth App."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For more details on configuration options, see the ",(0,r.jsx)(n.a,{href:"./configuration",children:"configuration section"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"client-side-configuration",children:"Client-side configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Add the ",(0,r.jsx)(n.code,{children:"serverpod_auth_idp_flutter"})," package to your Flutter app. The GitHub provider uses ",(0,r.jsx)(n.a,{href:"https://pub.dev/packages/flutter_web_auth_2",children:(0,r.jsx)(n.code,{children:"flutter_web_auth_2"})})," to handle the OAuth2 flow, so any documentation there should also apply to this setup."]}),"\n",(0,r.jsx)(n.h3,{id:"ios-and-macos",children:"iOS and MacOS"}),"\n",(0,r.jsxs)(n.p,{children:['There is no special configuration needed for iOS and MacOS for "normal" authentication flows.\nHowever, if you are using ',(0,r.jsx)(n.strong,{children:"Universal Links"})," on iOS, they require redirect URIs to use ",(0,r.jsx)(n.strong,{children:"https"}),".\nFollow the instructions in the ",(0,r.jsx)(n.a,{href:"https://pub.dev/packages/flutter_web_auth_2#ios",children:"flutter_web_auth_2"})," documentation."]}),"\n",(0,r.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,r.jsxs)(n.p,{children:["In order to capture the callback url, the following activity needs to be added to your ",(0,r.jsx)(n.code,{children:"AndroidManifest.xml"}),". Be sure to replace ",(0,r.jsx)(n.code,{children:"YOUR_CALLBACK_URL_SCHEME_HERE"})," with your actual callback url scheme registered in your GitHub app."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <application>\n\n    <activity\n      android:name="com.linusu.flutter_web_auth_2.CallbackActivity"\n      android:exported="true"\n      android:taskAffinity="">\n      <intent-filter android:label="flutter_web_auth_2">\n        <action android:name="android.intent.action.VIEW" />\n        <category android:name="android.intent.category.DEFAULT" />\n        <category android:name="android.intent.category.BROWSABLE" />\n        <data android:scheme="YOUR_CALLBACK_URL_SCHEME_HERE" />\n      </intent-filter>\n    </activity>\n\n  </application>\n</manifest>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"web",children:"Web"}),"\n",(0,r.jsxs)(n.p,{children:["On the web, you need a specific endpoint to capture the OAuth2 callback. To set this up, create an HTML file (e.g., ",(0,r.jsx)(n.code,{children:"auth.html"}),") inside your project's ",(0,r.jsx)(n.code,{children:"./web"})," folder and add the following content:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<!DOCTYPE html>\n<title>Authentication complete</title>\n<p>Authentication is complete. If this does not happen automatically, please close the window.</p>\n<script>\n  function postAuthenticationMessage() {\n    const message = {\n      'flutter-web-auth-2': window.location.href\n    };\n\n    if (window.opener) {\n      window.opener.postMessage(message, window.location.origin);\n      window.close();\n    } else if (window.parent && window.parent !== window) {\n      window.parent.postMessage(message, window.location.origin);\n    } else {\n      localStorage.setItem('flutter-web-auth-2', window.location.href);\n      window.close();\n    }\n  }\n\n  postAuthenticationMessage();\n<\/script>\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["You only need a single callback file (e.g. ",(0,r.jsx)(n.code,{children:"auth.html"}),") in your ",(0,r.jsx)(n.code,{children:"./web"})," folder.\nThis file is shared across all IDPs that use the OAuth2 utility, as long as your redirect URIs point to it."]})}),"\n",(0,r.jsx)(n.h2,{id:"present-the-authentication-ui",children:"Present the authentication UI"}),"\n",(0,r.jsxs)(n.h3,{id:"initializing-the-githubsigninservice",children:["Initializing the ",(0,r.jsx)(n.code,{children:"GitHubSignInService"})]}),"\n",(0,r.jsxs)(n.p,{children:["To use the GitHubSignInService, you need to initialize it in your main function. The initialization is done from the ",(0,r.jsx)(n.code,{children:"initializeGitHubSignIn()"})," extension method on the ",(0,r.jsx)(n.code,{children:"FlutterAuthSessionManager"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport 'package:flutter/material.dart';\nimport 'package:serverpod_flutter/serverpod_flutter.dart';\nimport 'package:your_client/your_client.dart';\n\nlate Client client;\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n\n  // Create the Serverpod client\n  client = Client('http://localhost:8080/')\n    ..connectivityMonitor = FlutterConnectivityMonitor()\n    ..authSessionManager = FlutterAuthSessionManager();\n\n  // Initialize Serverpod auth\n  await client.auth.initialize();\n\n  // Initialize GitHub Sign-In\n  // Note: For Web, ensure the redirectUri matches your auth.html location.\n  await client.auth.initializeGitHubSignIn(\n    clientId: 'YOUR_GITHUB_CLIENT_ID',\n    redirectUri: Uri.parse('https://example.com/auth.html'),\n  );\n\n  runApp(const MyApp());\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": Ensure the redirect URIs used in your code are also explicitly listed in your ",(0,r.jsx)(n.strong,{children:"GitHub App Dashboard"}),' under "Callback URLs". For Android, you must also register this scheme in your ',(0,r.jsx)(n.code,{children:"AndroidManifest.xml"}),"."]})}),"\n",(0,r.jsx)(n.h3,{id:"using-githubsigninwidget",children:"Using GitHubSignInWidget"}),"\n",(0,r.jsxs)(n.p,{children:["If you have configured the ",(0,r.jsx)(n.code,{children:"GitHubSignInWidget"})," as described in the ",(0,r.jsx)(n.a,{href:"#present-the-authentication-ui",children:"setup section"}),", the GitHub identity provider will be automatically detected and displayed in the sign-in widget."]}),"\n",(0,r.jsxs)(n.p,{children:["You can also use the ",(0,r.jsx)(n.code,{children:"GitHubSignInWidget"})," to include the GitHub authentication flow in your own custom UI."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import 'package:serverpod_auth_idp_flutter/serverpod_auth_idp_flutter.dart';\n\nGitHubSignInWidget(\n  client: client,\n  onAuthenticated: () {\n    // Do something when the user is authenticated.\n    //\n    // NOTE: You should not navigate to the home screen here, otherwise\n    // the user will have to sign in again every time they open the app.\n  },\n  onError: (error) {\n    // Handle errors\n    ScaffoldMessenger.of(context).showSnackBar(\n      SnackBar(content: Text('Error: $error')),\n    );\n  },\n)\n"})}),"\n",(0,r.jsx)(n.p,{children:"The widget automatically handles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GitHub Sign-In flow for iOS, macOS, Android, and Web."}),"\n",(0,r.jsx)(n.li,{children:"Token management."}),"\n",(0,r.jsx)(n.li,{children:"Underlying GitHub Sign-In package error handling."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For details on how to customize the GitHub Sign-In UI in your Flutter app, see the ",(0,r.jsx)(n.a,{href:"./customizing-the-ui",children:"customizing the UI section"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},21943:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/1-register-app-a99e5f32a6e9c2ce06640bc780cc7a77.png"},14312:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/2-add-permission-ded17994d79c1f6ece955f92b6a65df2.png"},49339:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/3-add-permission-bd02c742c6a92df4f638bfaef5c02597.png"},61464:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/4-get-credentials-0d8a27d65e94ac4b1166126cd6733f1f.png"},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);